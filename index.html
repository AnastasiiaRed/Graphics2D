<!DOCTYPE html>
<html>

	<head>
		<meta charset='utf-8'>
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<meta name="description" content="Graphics2D : JavaScript canvas library">

		<link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
		<title>Graphics2D</title>
	</head>

	<body>
		<div id="menu">
			<div id="lang">
				<a href="#" class="active">Ru</a>
				<a href="#" onClick="localStorage['lang'] = 'En'; location.href = 'http://keyten.github.io/Graphics2D/en.html'">En</a>
			</div>
			<a href="#top">Содержание</a>
			<div id="menu-toc">
				<a href="#features">Особенности</a>
				<a href="#quickstart">Быстрый старт</a>
				<a href="#context">Context</a>
				<a href="#shape">Shape</a>
				<a href="#rect">Rect</a>
				<a href="#circle">Circle</a>
				<a href="#path">Path</a>
				<a href="#text">Text</a>
				<a href="#textblock">TextBlock</a>
				<a href="#image">Image</a>
				<a href="#gradient">Gradient</a>
				<a href="#pattern">Pattern</a>
			</div>
			<a href="#try">Песочница</a>
			<a href="#examples">Примеры</a>
			<a href="#source">Исходники</a>
		</div>

		<!-- HEADER -->
		<div id="header_wrap" class="outer">
				<header class="inner">
					<a id="forkme_banner" href="https://github.com/keyten/Graphics2D">Перейти на GitHub</a>

					<h1 id="project_title">Graphics2D</h1>
					<h2 id="project_tagline">JavaScript canvas library</span></h2>

						<section id="downloads">
							<a class="zip_download_link" href="https://github.com/keyten/Graphics2D/zipball/master">Скачать Graphics2D как .zip file</a>
							<a class="tar_download_link" href="https://github.com/keyten/Graphics2D/tarball/master">Скачать Graphics2D как tar.gz file</a>
						</section>
				</header>
		</div>

		<!-- MAIN CONTENT -->
		<div id="main_content_wrap" class="outer">
			<section id="main_content" class="inner">
<p><em>Graphics2D</em> доступна по <a href="http://www.gnu.org/copyleft/lgpl.html">LGPL</a> / <a href="http://opensource.org/licenses/mit-license.php">MIT</a>.</p>
<p>Graphics2D - JavaScript-библиотека для простого объекто-ориентированного рисования на html5 canvas.</p>

	  <h2 id="features">Особенности</h2>
	  <h4>Объектно-ориентированное рисование</h4>
	  <p>Вам не нужно задумываться, как хранить список нарисованных объектов, как их заново отрисовывать и т.п., как это происходит с обычным canvas-ом. Graphics2D предоставляет вам простые объекты, которые сразу же перерисуются при изменении их свойств.</p>
	  <!-- дальше смотреть с осторожностью: автоматически сгенерированный код. Я предупреждал! -->
	  <div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">rect</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="s1">'red'</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">'blue'</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">stroke</span><span class="p">(</span><span class="s1">'2px green 0.5'</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="s1">'opacity'</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">);</span>
</pre></div>
		<p>Такой подход гораздо проще обычного, и позволяет не задумываться над ненужными нам моментами.</p>
	  <h4>Простая события мыши</h4>
	  <p>Обычный canvas имеет некоторые сложности с обработкой событий мыши: нам нужно ставить обработчики, ловить событие, определять, находится ли в этой точке объект... В Graphics2D всё традиционно проще: ставьте функцию, остальное он сделает сам:</p>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
   <span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">contextX</span><span class="p">)</span>
       <span class="p">.</span><span class="nx">y</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">contextY</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
	  <h4>Одинаковый подход к разным объектам</h4>
	  <p>Большинство объектов наследуются от абстрактного класса <code>Shape</code>, в котором и заключено большинство их методов и функций. Таким образом, вы можете использовать разные объекты одинаково, не задумываясь, прямоугольник перед вами, или картинка.</p>
	  <h4>Быстрые вызовы</h4>
	  <em>Беспощадно утащенная из <a href="http://ru.rightjs.org/tutorials/top-features" target="_blank">RightJS</a> идея.</em>
	  <p>Не всегда нужно писать функцию для обработки события. Мы привыкли делать так:</p>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">'blue'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
		<p>Это громоздко и неудобно. Давайте писать вот так:</p>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="s1">'fill'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">);</span>
</pre></div>
		<br/>
		<p>А ещё есть вызовы по таймеру. Фактически, тот же window.setTimeout, только привязанный к нашему объекту:</p>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="s1">'hide'</span><span class="p">);</span>
<span class="c1">// объект rect исчезнет через 1 секунду (1000 мс).</span>
</pre></div>
	  <h4>CSS-координаты</h4>
	  <em>Не спрашивайте, зачем это нужно, я сам не знаю.</em>
	  <p>Везде (ну почти) можно указывать координаты в CSS-единицах:</p>
<div class="highlight highlight-js"><pre><span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="s1">'10px'</span><span class="p">,</span> <span class="s1">'10px'</span><span class="p">,</span> <span class="s1">'0.2em'</span><span class="p">,</span> <span class="s1">'30pt'</span><span class="p">,</span> <span class="s1">'#ff0'</span><span class="p">);</span>
</pre></div>
	<h4>Абстрактные объекты</h4>
	<p>Можно создать объект без заливки и обводки - однако мы можем использовать его свойства (например - isPointIn), и даже делать его обработчиком события.</p>	  <h4>jQuery-подход</h4>
	  <p>Сразу несколько пунктов в одном... Во-первых, это цепочки вызовов (каждый метод возвращает this, если не требуется иного):</p>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">x</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="p">.</span><span class="nx">y</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">'red'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="s1">'stroke'</span><span class="p">,</span> <span class="s1">'green'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="s1">'animate'</span><span class="p">,</span> <span class="s1">'stroke'</span><span class="p">,</span> <span class="s1">'yellow'</span><span class="p">);</span>
</pre></div>
    	<p>Второе - это использование одних и тех же методов для получения и изменения данных. Ну и не только...</p>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">x</span><span class="p">();</span> <span class="c1">// -&gt; 10</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">x</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">x</span><span class="p">();</span> <span class="c1">// -&gt; 100</span>

<span class="nx">rect</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="s1">'fill'</span><span class="p">,</span> <span class="s1">'red'</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">animate</span><span class="p">({</span> <span class="nx">fill</span><span class="o">:</span><span class="s1">'red'</span><span class="p">,</span> <span class="nx">opacity</span><span class="o">:</span><span class="mf">0.5</span> <span class="p">});</span>
</pre></div>
		<h4>Кстати...</h4>
		<p>Помнится, таким подходом славился ExtJS, но вообще он применяется много где. А именно: мы можем вместо обычного указания параметров, передать объект, указав там ещё и дополнительные параметры. Ну например...</p>
<div class="highlight highlight-js"><pre><span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">({</span>
  <span class="nx">x</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="nx">y</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="nx">width</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
  <span class="nx">height</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>

  <span class="nx">fill</span><span class="o">:</span> <span class="s1">'cyan'</span><span class="p">,</span>
  <span class="nx">stroke</span><span class="o">:</span> <span class="s1">'2px round black'</span><span class="p">,</span>
  <span class="nx">opacity</span><span class="o">:</span> <span class="mf">0.7</span><span class="p">,</span>
  <span class="nx">composite</span><span class="o">:</span> <span class="s1">'xor'</span>
<span class="p">});</span>

<span class="c1">// а в обычном виде это выглядит так:</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="s1">'cyan'</span><span class="p">,</span> <span class="s1">'2px round black'</span><span class="p">).</span><span class="nx">opacity</span><span class="p">(</span><span class="mf">0.7</span><span class="p">).</span><span class="nx">composite</span><span class="p">(</span><span class="s1">'xor'</span><span class="p">);</span>
</pre></div>


<br/><br/>
	  <h2 id="quickstart">Быстрый старт</h2>
<p>Начальный обзор возможностей Graphics2D, короткое описание всех возможностей.</p>
<h3>Поехали</h3>
<p>Просто <a href="">скачиваем</a> js-файл и подключаем к странице:</p>
<div class="highlight highlight-html"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"/javascript/graphics2d.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
<p>Создаём наш canvas:</p>
<div class="highlight highlight-html"><pre><span class="nt">&lt;canvas</span> <span class="na">width=</span><span class="s">"700"</span> <span class="na">height=</span><span class="s">"400"</span> <span class="na">id=</span><span class="s">"mycanvas"</span><span class="nt">&gt;&lt;/canvas&gt;</span>
</pre></div>
<p>И подключаем Graphics2D:</p>
<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">Graphics2D</span><span class="p">.</span><span class="nx">id</span><span class="p">(</span><span class="s1">'mycanvas'</span><span class="p">);</span>
</pre></div>
<p>И всё! Можно рисовать.</p>
<h3>Рисуем</h3>
<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">rect</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="s1">'black'</span><span class="p">,</span> <span class="s1">'20px blue round'</span><span class="p">);</span>
<span class="c1">// x, y, width, height; fill и stroke необязательны</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">animate</span><span class="p">({</span>
    <span class="nx">fill</span><span class="o">:</span> <span class="s1">'red'</span><span class="p">,</span>
    <span class="nx">opacity</span><span class="o">:</span> <span class="mf">0.9</span><span class="p">,</span>
    <span class="nx">stroke</span><span class="o">:</span> <span class="s1">'10px'</span><span class="p">,</span>
    <span class="nx">width</span><span class="o">:</span> <span class="mi">150</span><span class="p">,</span>
    <span class="nx">height</span><span class="o">:</span> <span class="mi">150</span><span class="p">,</span>
    <span class="nx">rotate</span><span class="o">:</span> <span class="mi">45</span>
<span class="p">});</span>
</pre></div>


<br/><br/>
	  <h2 id="context">Context</h2>
	  <p>Сначала нужно получить контекст Graphics2D:</p>
	  <div class="highlight highlight-js"><pre><span class="o">&lt;</span><span class="nx">canvas</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"mycanvas"</span><span class="o">&gt;&lt;</span>/canvas&gt;
<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
  <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">Graphics2D</span><span class="p">.</span><span class="nx">id</span><span class="p">(</span><span class="s1">'mycanvas'</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">Graphics2D</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s1">'canvas'</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// первый &lt;canvas&gt; на странице</span>
  <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">Graphics2D</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'mycanvas'</span><span class="p">)</span> <span class="p">);</span>
<span class="o">&lt;</span><span>/script&gt;</span>
</pre></div>
	  </p>

		<h3>Методы</h3>
		<p>Все методы возвращают сам объект, если не требуется иного: такое использование позволяет строить цепочки вызовов.</p>
<div class="highlight highlight-js"><pre><span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">x</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">'red'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="s1">'stroke'</span><span class="p">,</span> <span class="s1">'2px blue'</span><span class="p">);</span>
</pre></div>
<br/>
		<h4>update</h4>
		<p>Обновляет холст. Требуется, если вы хотите изменять внутренние свойства объектов вручную (напр. не <code>rect.x(10)</code>, а <code>rect._x = 10</code>). Параметров нет.</p>

		<h4>getObjectInPoint</h4>
<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">getObjectInPoint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
</pre></div>
		<p>Возвращает объект в точке <code>(x; y)</code>. Если таких несколько - возвращает самый верхний. Не учитывает скрытые методом <code>hide</code> объекты.</p>

		<h4>on</h4>
<div class="highlight highlight-js"><pre><span class="nx">ctx</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
  <span class="nx">e</span><span class="p">.</span><span class="nx">targetObject</span><span class="p">;</span> <span class="c1">// объект холста, на котором клик</span>
  <span class="nx">e</span><span class="p">.</span><span class="nx">contextX</span><span class="p">;</span>
  <span class="nx">e</span><span class="p">.</span><span class="nx">contextY</span><span class="p">;</span> <span class="c1">// координаты мыши на холсте</span>
<span class="p">});</span>
</pre></div>
		<p>Ставит обработчик события на холст. Расширяет объект <code>event</code> (в примере - переменная <code>e</code>) 3 свойствами.</p>

		<h4>off</h4>
<div class="highlight highlight-js"><pre><span class="nx">ctx</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="nx">anyfunc</span><span class="p">);</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="nx">anyfunc</span><span class="p">);</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">'click'</span><span class="p">);</span>
</pre></div>
		<p>Убирает определённный обработчик события, либо все обработчики определённого события</p>

		<h4>fire</h4>
<div class="highlight highlight-js"><pre><span class="nx">ctx</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
  <span class="nx">alert</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">text</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="p">{</span> <span class="nx">text</span><span class="o">:</span><span class="s1">'Wow!'</span> <span class="p">});</span>
</pre></div>
		<p>Запускает все обработчики определённого события, 2 параметр - передаваемый объект <code>event</code>, опционально.</p>

		<h3>Алиасы</h3>
<div class="highlight highlight-js"><pre><span class="nx">ctx</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span> <span class="c1">// = ctx.on('click', callback);</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">click</span><span class="p">();</span> <span class="c1">// = ctx.fire('click');</span>
</pre></div>
		<p>Есть алиасы для разных событий: <code>click</code>, <code>dblclick</code>, <code>mousedown</code>, <code>mouseup</code>, <code>mousemove</code>, <code>mouseover</code>, <code>mouseout</code>, <code>mousewheel</code>, <code>focus</code>, <code>blur</code>.

		<h3>Объекты</h3>
<div class="highlight highlight-js"><pre><span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="s1">'black'</span><span class="p">);</span>
</pre></div>
		<p>Различные объекты также создаются с помощью методов контекста, однако эта тема более подробно будет рассмотрена в самих объектах.</p>
		<p>Пока же вот эти методы: <code>rect</code>, <code>circle</code>, <code>path</code>, <code>image</code>, <code>text</code>, <code>textblock</code>, <code>gradient</code>, <code>pattern</code>.</p>


<br/><br/>

	  <h2 id="shape">Shape</h2>
	  <p>Все рисуемые объекты наследуются от абстрактного класса <code>Shape</code>. У него есть общие для них свойства, методы, кроме того, разберём прочие похожие моменты.</p>
<div class="highlight highlight-js"><pre><span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="s1">'black'</span><span class="p">,</span> <span class="s1">'2px blue round'</span><span class="p">);</span>
</pre></div>
	  <p>Всегда сначала передаются параметры самой фигуры, затем - заливка и обводка. О них позже.</p>
	  <p>Кроме того, мы можем передать функции объект, а с ним и дополнительные параметры.</p>
<div class="highlight highlight-js"><pre><span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">({</span>
  <span class="nx">x</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="nx">y</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="nx">width</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
  <span class="nx">height</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>

  <span class="nx">fill</span><span class="o">:</span> <span class="s1">'black'</span><span class="p">,</span>
  <span class="nx">opacity</span><span class="o">:</span> <span class="mf">0.8</span><span class="p">,</span>
  <span class="nx">composite</span><span class="o">:</span> <span class="s1">'xor'</span>
<span class="p">});</span>
</pre></div>
		<p>Возможные общие параметры: <code>fill</code>, <code>stroke</code>, <code>opacity</code>, <code>composite</code>, <code>visible</code>, <code>mask</code>.</p>
		<p>И кстати, большинство параметров умеют принимать css-координаты:</p>
<div class="highlight highlight-js"><pre><span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="s1">'10pt'</span><span class="p">,</span> <span class="s1">'10pt'</span><span class="p">,</span> <span class="s1">'0.5em'</span><span class="p">,</span> <span class="s1">'1em'</span><span class="p">);</span>
</pre></div>
		<p>Да, можно создавать объекты без заливки и обводки. Они не будут отрисовываться, но <!-- Польша стронг! --><strong style="color:red">(!!!)</strong> будут реагировать на события мыши (и блокировать события нижележащим элементам). Чтобы такого не происходило, нужно ставить <code>visible: false</code>, либо скрывать методом <code>hide</code>.</p>

		<h3>Методы</h3>
		<h4>fill</h4>
		<p>Возвращает заливку объекта, либо изменяет (если передан параметр).</p>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">'red'</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span> <span class="c1">// -&gt; 'red'</span>
</pre></div>
		<p>Кроме этого... мы можем нарисовать сразу градиент:</p>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">fill</span><span class="p">({</span> <span class="nx">colors</span><span class="o">:</span><span class="p">[</span><span class="s1">'red'</span><span class="p">,</span> <span class="s1">'green'</span><span class="p">,</span> <span class="s1">'black'</span><span class="p">],</span> <span class="nx">from</span><span class="o">:</span><span class="s1">'top'</span><span class="p">,</span> <span class="nx">to</span><span class="o">:</span><span class="s1">'bottom'</span> <span class="p">});</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">fill</span><span class="p">().</span><span class="nx">from</span><span class="p">();</span> <span class="c1">// -&gt; 'top'</span>
</pre></div>
		<p>Ну и, конечно же, текстуру:</p>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">'./image.png'</span><span class="p">);</span>
</pre></div>
		<p>Адрес текстуры должен начинаться с <code>http://</code>, либо с точки <code>.</code> Также можно передать объект с параметром <code>image</code> (и, по желанию, <code>repeat</code>).</p>
		<p>За параметрами градиентов и текстур - в соотв. разделы.</p>

		<h4>stroke</h4>
		<p>Обводка. Возвращает / изменяет.</p>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
<span class="c1">// -&gt; {color, width, cap, join, dash}</span>

<span class="nx">rect</span><span class="p">.</span><span class="nx">stroke</span><span class="p">(</span><span class="s1">'2px red'</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">stroke</span><span class="p">(</span><span class="s1">'5px'</span><span class="p">);</span> <span class="c1">// меняются лишь указанные параметры</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
<span class="c1">// -&gt; { color:'red', width:5 } -- css-ширина конвертируется в число</span>
</pre></div>
		<p>Возможные параметры:</p>
		<ul>
			<li><code>width</code> / ширина - <code>2px</code>, <code>.5em</code>, <code>8</code> и т.д. <em>Просто-float, без единиц, воспримет как прозрачность.</em></li>
			<li><code>color</code> / цвет - <code>#f00</code>, <code>green</code>, <code>rgb(0,0,0)</code> и т.д. Пробелы использовать нельзя.</li>
			<li><code>join</code> / соединения - <code>miter</code>, <code>bevel</code>, <code>round</code>.</li>
			<li><code>cap</code> / скругления - <code>butt</code>, <code>square</code>, <code>round</code>. <em>Если указан только один <code>round</code>, то он будет применен и к join, и к cap.</em></li>
			<li><code>dash</code> / пунктир - массив <code>[1,2,2]</code>, либо же значения: <code>shortdash</code>, <code>shortdot</code>, <code>shortdashdot</code>, <code>shortdashdotdot</code>, <code>dot</code>, <code>dash</code>, <code>longdash</code>, <code>dashdot</code>, <code>longdashdot</code>, <code>longdashdotdot</code>.</li>
			<li>Прозрачность - <code>0.5</code>, <code>.3</code> и т.п. Только float, только в текстовом формате, вычисляется сразу же. Сделано для удобства: например, <code>green 0.5</code> вместо <code>rgba(0,128,0,0.5)</code>.</li>
		</ul>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">stroke</span><span class="p">(</span><span class="s1">'0.5em round square [1,2] green 0.5'</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">stroke</span><span class="p">({</span>
  <span class="nx">color</span><span class="o">:</span> <span class="s1">'black'</span><span class="p">,</span>
  <span class="nx">width</span><span class="o">:</span> <span class="s1">'4px'</span><span class="p">,</span>
  <span class="nx">cap</span><span class="o">:</span>   <span class="s1">'butt'</span><span class="p">,</span>
  <span class="nx">join</span><span class="o">:</span>  <span class="s1">'round'</span><span class="p">,</span>
  <span class="nx">dash</span><span class="o">:</span>  <span class="s1">'dot'</span>
<span class="p">});</span>
</pre></div>
			<h4>opacity</h4>
			<p>Прозрачность, число (float) от 0 до 1, возвращает / изменяет.</p>
			<h4>composite</h4>
			<p>Функция наложения на нижележащие объекты.</p>
			<p>Варианты: <code>source-over</code>, <code>source-atop</code>, <code>source-in</code>, <code>source-out</code>, <code>destination-over</code>, <code>destination-atop</code>, <code>destination-in</code>, <code>destination-out</code>, <code>lighter</code>, <code>darker</code>, <code>copy</code>, <code>xor</code>.</p>
			<p>Другие варианты (поддерживаются не везде!): <code>normal</code>, <code>multiply</code>, <code>screen</code>, <code>overlay</code>, <code>darken</code>, <code>lighten</code>, <code>color-dodge</code>, <code>color-burn</code>, <code>hard-light</code>, <code>soft-light</code>, <code>difference</code>, <code>exclusion</code>, <code>hue</code>, <code>saturation</code>, <code>color</code>, <code>luminosity</code>.</p>
			<p>Стандарт: <a href="http://dev.w3.org/fxtf/compositing-1" target="_blank">http://dev.w3.org/fxtf/compositing-1</a></p>
			<h4>show / hide</h4>
			<p>Делают элемент видимым / невидимым + реагирующим / не реагирующим на события.</p>
			<h4>cursor</h4>
			<p>Ставит курсор при наведении на объект.</p>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">cursor</span><span class="p">(</span><span class="s1">'pointer'</span><span class="p">);</span>
</pre></div>
			<h4>z</h4>
			<p>Возвращает, либо изменяет z-index элемента.</p>
			<p>Z-index в понятии Graphics2D - просто индекс элемента в массиве всех элементов. А, соответственно, и каким по счёту отрисовывается. 2 элементов с одинаковыми индексами быть не может.</p>
<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">circle</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">z</span><span class="p">();</span> <span class="c1">// -&gt; 0</span>
<span class="nx">b</span><span class="p">.</span><span class="nx">z</span><span class="p">();</span> <span class="c1">// -&gt; 1</span>

<span class="nx">b</span><span class="p">.</span><span class="nx">z</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="nx">b</span><span class="p">.</span><span class="nx">z</span><span class="p">();</span> <span class="c1">// -&gt; 0</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">z</span><span class="p">();</span> <span class="c1">// -&gt; 1</span>
</pre></div>
			<h4>isPointIn</h4>
			<p>Возвращает <code>true</code>, если точка с переданными координатами (2 параметра - x, y) находится внутри объекта.</p>
<div class="highlight highlight-js"><pre><span class="k">if</span><span class="p">(</span><span class="nx">rect</span><span class="p">.</span><span class="nx">isPointIn</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">));</span>
</pre></div>
			<h4>bounds</h4>
			<p>Возвращает прямоугольник (хитбокс) объекта. Содержит координаты левой верхней точки (<code>x</code>, <code>y</code> / <code>x1</code>, <code>y1</code>), правой нижней (<code>x2</code>, <code>y2</code>), ширину и высоту (<code>width</code>, <code>height</code> / <code>w</code>, <code>h</code>), координаты центра (<code>cx</code>, <code>cy</code>).</p>

			<h3>События</h3>
			<h4>on</h4>
			<p>Ставит на функцию обработчик события:</p>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">'red'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
			<p>В <code>this</code> передаётся сам объект.</p>
			<h4>off</h4>
			<p>Убирает:</p>
<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">anyfunc</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">'mouseover'</span><span class="p">,</span> <span class="nx">anyfunc</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">opacity</span><span class="p">(</span><span class="mf">0.5</span><span class="p">);</span>
    <span class="c1">// эта функция сработает только один раз</span>
<span class="p">};</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'mouseover'</span><span class="p">,</span> <span class="nx">anyfunc</span><span class="p">);</span>
</pre></div>
			<p>Можно убрать все обработчики определённого события:</p>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">'click'</span><span class="p">);</span>
</pre></div>
			<h4>fire</h4>
			<p>И вызвать все обработчики:</p>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="nx">alert</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">which</span><span class="p">)</span> <span class="p">});</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="p">{</span> <span class="nx">which</span><span class="o">:</span> <span class="s1">'Hi, world'</span> <span class="p">});</span>
</pre></div>
			<p>Второй параметр можно не указывать, кстати.</p>
			<h4>Алиасы</h4>
			<p>Короткие функции:</p>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){});</span> <span class="c1">// = rect.on('click', function(){});</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">click</span><span class="p">();</span> <span class="c1">// = rect.fire('click');</span>
</pre></div>
			<p>Все возможные варианты: <code>click</code>, <code>dblclick</code>, <code>mousedown</code>, <code>mouseup</code>, <code>mousemove</code>, <code>mouseover</code>, <code>mouseout</code>, <code>mousewheel</code>, <code>focus</code>, <code>blur</code>.</p>
			<h3>Трансформации</h3>
			<p>Все трансформации (кроме <code>translate</code>) принимают параметр <code>pivot</code> -- центр трансформации (например, в случае с <code>rotate</code> -- вокруг какой точки происходит вращение). Можно передать как абсолютные координаты (<code>[0,0]</code>, <code>{x:10, y:10}</code>), так и одну из точек фигуры: <code>left</code>, <code>right</code>, <code>top</code>, <code>bottom</code>, <code>left top</code> / <code>top left</code> / <code>lt</code> / <code>tl</code> и т.д.</p>
			<p>По умолчанию точка -- центр фигуры.</p>
			<h4>scale</h4>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">'left top'</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s1">'center'</span><span class="p">);</span>
</pre></div>
<p>Увеличивает фигуру, можно передать как по x, y разные размеры, так и один одинаковый.</p>
			<h4>rotate</h4>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">rotate</span><span class="p">(</span><span class="mi">45</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">rotate</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">'left'</span><span class="p">);</span>
</pre></div>
<p>Поворачивает фигуру, указываются градусы (можно перевести градусы в радианы как <code>degree / 180 * Math.PI</code>, а налогично наоборот <code>rad / Math.PI * 180</code>).</p>
			<h4>skew</h4>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">skew</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">skew</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">skew</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">'left'</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">skew</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="s1">'top'</span><span class="p">);</span>
</pre></div>
<p>"Сдвигает" фигуру. Указываются градусы.</p>
			<h4>translate</h4>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">translate</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
</pre></div>
<p>Сдвигает фигуру по осям координат. Полезно, когда мы по-разному трансформировали фигуру, у неё смещаются оси координат, и простое изменение её координат даст нам немного неожиданное поведение.</p>
			<h4>transform</h4>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">transform</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// вокруг центра</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">transform</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">'top'</span><span class="p">);</span>
</pre></div>
<p>Трансформирует фигуру.</p><p>Как это делается, можно почитать, например, <a href="http://www.intuit.ru/studies/courses/1063/210/lecture/5434?page=5" target="_blank">здесь</a>.</p>

			<h3>Анимация</h3>
<p>Функция <code>animate</code>:</p>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="s1">'width'</span><span class="p">,</span> <span class="s1">'2em'</span><span class="p">);</span>
<span class="c1">// param, value, duration, easing, after</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="s1">'width'</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span>  <span class="mi">3000</span><span class="p">,</span> <span class="s1">'bounceOut'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span> <span class="k">this</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">'blue'</span><span class="p">);</span> <span class="p">});</span>

<span class="nx">rect</span><span class="p">.</span><span class="nx">animate</span><span class="p">({</span> <span class="nx">width</span><span class="o">:</span><span class="mi">200</span><span class="p">,</span> <span class="nx">x</span><span class="o">:</span><span class="mi">0</span> <span class="p">},</span> <span class="mi">3000</span><span class="p">,</span> <span class="s1">'bounceOut'</span><span class="p">,</span> <span class="nx">afterfunc</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">animate</span><span class="p">({</span> <span class="nx">fill</span><span class="o">:</span> <span class="s1">'red'</span><span class="p">,</span> <span class="nx">stroke</span><span class="o">:</span><span class="s1">'4px'</span> <span class="p">},</span> <span class="p">{</span>
 <span class="nx">duration</span><span class="o">:</span> <span class="mi">1000</span><span class="p">,</span>
 <span class="nx">easing</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">){</span> <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="p">},</span>
 <span class="nx">after</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="k">this</span><span class="p">.</span><span class="nx">hide</span><span class="p">()</span> <span class="p">}</span>
<span class="p">});</span>
</pre></div>
<p>Вроде бы всё понятно. Доступные параметры для анимирования:</p>

<ul>
<li><code>opacity</code></li>
<li>
<code>fill</code> (без поддержки градиентов и текстур)</li>
<li>
<code>stroke</code> (только цвет и ширина)</li>
<li>
<code>crop</code> -- для изображений</li>
<li>
<code>x</code>, <code>y</code>, <code>width</code>, <code>height</code>, <code>cx</code>, <code>cy</code>, <code>radius</code> -- параметры фигур</li>
<li>
<code>rotate</code>, <code>scale</code>, <code>scaleX</code>, <code>scaleY</code>, <code>skew</code>, <code>skewX</code>, <code>skewY</code>, <code>translate</code>, <code>translateX</code>, <code>translateY</code> -- трансформации. Все только вокруг центра фигуры, по-другому пока никак. Вот так: <code>skew:[10,3]</code> писать нельзя (пока что), нужно так: <code>skewX:10, skewY:3</code>.</li>
</ul><p>Можно добавить свои...</p>


<br/><br/>

	  <h2 id="rect">Rect</h2>
	  <p>Прямоугольник. Параметры: <code>x</code>, <code>y</code> (координаты левой верхней точки), <code>width</code>, <code>height</code> (ширина и высота). Как всегда, дальше есть заливка и обводка.</p>
<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">rect</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="s1">'black'</span><span class="p">,</span> <span class="s1">'blue 4px'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">rec2</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">({</span>
  <span class="nx">x</span><span class="o">:</span> <span class="mi">20</span><span class="p">,</span>
  <span class="nx">y</span><span class="o">:</span> <span class="mi">20</span><span class="p">,</span>
  <span class="nx">width</span><span class="o">:</span> <span class="mi">300</span><span class="p">,</span>
  <span class="nx">height</span><span class="o">:</span> <span class="mi">300</span>
<span class="p">});</span>
</pre></div>
		<h3>Методы</h3>
		<h4>x, y, width, height</h4>
		<p>Обычные методы, регулирующие параметры: при вызове без аргумента - возвращают значение, с - изменяют.</p>
<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">x</span><span class="p">();</span> <span class="c1">// -&gt; 10</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">x</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">x</span><span class="p">();</span> <span class="c1">// -&gt; 100</span>
</pre></div>
		<h4>x1, y1, x2, y2</h4>
		<p>Немного другой принцип: 1 точка - левый верхний угол прямоугольника, 2 - правый нижний. Мы можем получать их координаты и менять (<strong>причём: при изменении одной, координаты другой точки меняться не будут!</strong>)</p>
<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">rect</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">x1</span><span class="p">();</span> <span class="c1">// -&gt; 10</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">x2</span><span class="p">();</span> <span class="c1">// -&gt; 210</span>

<span class="nx">rect</span><span class="p">.</span><span class="nx">x1</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">width</span><span class="p">();</span> <span class="c1">// -&gt; 210</span>

<span class="nx">rect</span><span class="p">.</span><span class="nx">x2</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
<span class="nx">rect</span><span class="p">.</span><span class="nx">width</span><span class="p">();</span> <span class="c1">// -&gt; 50</span>
</pre></div>

<br/><br/>
		<h2 id="circle">Circle</h2>
		<p>Круг. Параметры: <code>cx</code>, <code>cy</code> (координаты центра) и <code>radius</code> (радиус).</p>
<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">circ</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">circle</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s1">'4pt round black'</span><span class="p">);</span>
<span class="c1">// fill=null</span>

<span class="kd">var</span> <span class="nx">cir2</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">circle</span><span class="p">({</span>
    <span class="nx">cx</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
    <span class="nx">cy</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
    <span class="nx">radius</span><span class="o">:</span> <span class="mi">25</span>
<span class="p">});</span>
</pre></div>
		<h3>Методы</h3>
		<h4>cx, cy, radius</h4>
		<p>Параметры: при вызове без аргумента - возвращают значение, с - изменяют.</p>
<div class="highlight highlight-js"><pre><span class="nx">circ</span><span class="p">.</span><span class="nx">cx</span><span class="p">();</span> <span class="c1">// -&gt; 200</span>
<span class="nx">circ</span><span class="p">.</span><span class="nx">radius</span><span class="p">();</span> <span class="c1">// -&gt; 50</span>
<span class="nx">circ</span><span class="p">.</span><span class="nx">radius</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
<span class="nx">circ</span><span class="p">.</span><span class="nx">radius</span><span class="p">();</span> <span class="c1">// -&gt; 150</span>
</pre></div>



<br/><br/>
	  <h2 id="path">Path</h2>
	  <p>Путь. Параметры: <code>points</code>, <code>x</code>, <code>y</code>.</p>
<div class="highlight highlight-js"><pre><span class="nx">ctx</span><span class="p">.</span><span class="nx">path</span><span class="p">(</span><span class="s1">'M10,10 L200,200 z'</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s1">'15px blue'</span><span class="p">);</span>

<span class="nx">ctx</span><span class="p">.</span><span class="nx">path</span><span class="p">({</span>
    <span class="nx">points</span><span class="o">:</span> <span class="s1">'M10,10'</span><span class="p">,</span> <span class="c1">// это не совсем svg</span>
    <span class="nx">x</span><span class="o">:</span><span class="mi">200</span><span class="p">,</span>
    <span class="nx">y</span><span class="o">:</span><span class="mi">200</span>
<span class="p">});</span>


<span class="c1">// кроме того, можно передавать точки так:</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">path</span><span class="p">([[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">]]);</span>
<span class="c1">// 1 - moveTo, остальные: 2 параметра - lineTo, 4 - quadratic, 6 - bezier</span>

<span class="nx">ctx</span><span class="p">.</span><span class="nx">path</span><span class="p">([{</span><span class="nx">f</span><span class="o">:</span><span class="s1">'moveTo'</span><span class="p">,</span> <span class="nx">arg</span><span class="o">:</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">]},</span> <span class="p">{</span><span class="nx">f</span><span class="o">:</span><span class="s1">'lineTo'</span><span class="p">,</span> <span class="nx">x</span><span class="o">:</span><span class="mi">200</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span><span class="mi">200</span><span class="p">}]);</span>
<span class="c1">// можно передать массив аргументов, или же параметры отдельно</span>

<span class="nx">ctx</span><span class="p">.</span><span class="nx">path</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">);</span> <span class="c1">// или даже так</span>
</pre></div>
		<h3>Методы</h3>
<h4>x / y</h4>
<div class="highlight highlight-js"><pre><span class="nx">path</span><span class="p">.</span><span class="nx">x</span><span class="p">();</span> <span class="c1">// -&gt; 10</span>
<span class="nx">path</span><span class="p">.</span><span class="nx">x</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
</pre></div>
<h4>closed</h4>
<p>Закрыт или открыт путь (также он может быть закрыт внутри переданной closePath, тогда не регулируется).</p>
<div class="highlight highlight-js"><pre><span class="nx">path</span><span class="p">.</span><span class="nx">closed</span><span class="p">();</span> <span class="c1">// -&gt; false</span>
<span class="nx">path</span><span class="p">.</span><span class="nx">closed</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</pre></div>
<h4>close</h4>
<p>Просто закрывает.</p>
<h4>allPoints</h4>
<p>Возвращает все точки фигуры (например, у bezier - 3 точки), либо - если передана функция - работает как [].map. Может возвратить новые координаты для точки.</p>
<div class="highlight highlight-js"><pre><span class="nx">path</span><span class="p">.</span><span class="nx">allPoints</span><span class="p">();</span> <span class="c1">// -&gt; [[0,0], [10,10], ...]</span>
<span class="nx">path</span><span class="p">.</span><span class="nx">allPoints</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">){</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// если точка &lt; [0,0], то ничего не делаем</span>
  <span class="k">return</span> <span class="p">[</span><span class="nx">x</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="mi">10</span><span class="p">];</span> <span class="c1">// все остальные точки сдвигаем на 10,10</span>
<span class="p">});</span>
</pre></div>
<h4>transformPoints</h4>
<p>Трансформирует путь. Отличие от <code>transform</code> (и <code>rotate</code>, <code>scale</code> и т.д.) в том, что изменяются координаты точек (а в <code>transform</code> происходит постизменение, т.е. изменение координат точек после трансформации там подвержено ей же, а здесь - нет).</p>
<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">path</span><span class="p">(</span><span class="s1">'M10,10 L200,200'</span><span class="p">);</span>
<span class="nx">p</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// moveTo 10 10</span>

<span class="nx">p</span><span class="p">.</span><span class="nx">rotate</span><span class="p">(</span><span class="mi">90</span><span class="p">);</span>
<span class="nx">p</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// moveTo 10 10</span>
<span class="c1">// фигура повернулась, однако (!) координаты всё те же</span>

<span class="nx">p</span><span class="p">.</span><span class="nx">transformPoints</span><span class="p">(</span><span class="s1">'rotate'</span><span class="p">,</span> <span class="mi">90</span><span class="p">);</span>
<span class="nx">p</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// moveTo 200 10</span>
</pre></div>
<p>Доступны следующие варианты использования:</p>
<ul>
	<li><code>'translate', x, y</code></li>
	<li><code>'scale', x, y, pivot</code></li>
	<li><code>'scale', size, pivot</code></li>
	<li><code>'rotate', angle, pivot</code></li>
	<li><code>'skew', x, y, pivot</code></li>
	<li><code>'skew', size, pivot</code></li>
	<li><code>m11, m12, m21, m22, dx, dy</code></li>
</ul>
<p><code>pivot</code> - центр трансформации (напр. центр вращения), можно указывать как и в обычных функциях трансформации (<code>top left</code>, <code>[10,10]</code> и т.д.).
<p>В <code>skew</code> и <code>rotate</code> - градусы.</p>
<h3>Функции рисования</h3>
<ul>
	<li><code>moveTo(x, y)</code></li>
	<li><code>lineTo(x, y)</code></li>
	<li><code>quadraticCurveTo(hx, hy, x, y)</code></li>
	<li><code>bezierCurveTo(h1x, h1y, h2x, h2y, x, y)</code></li>
	<li><code>arcTo(x1, y1, x2, y2, radius, clockwise)</code></li>
	<li><code>arc(x, y, radius, start, end, clockwise)</code></li>
</ul>
<h4>point</h4>
<p>С одним параметром - возвращает точку с указанным индексом (0 - первая, 1 - вторая и т.д.). С двумя - изменяет (можно передать сразу несколько точек).</p>
<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">path</span><span class="p">(</span><span class="s1">'M10,10 L200,200'</span><span class="p">);</span>

<span class="nx">p</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// -&gt; { f:'moveTo', arg:[10,10], x:10, y:10 }</span>
<span class="nx">p</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// -&gt; { f:'lineTo', arg:[200,200], x:200, y:200 }</span>

<span class="nx">p</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'L100,100 L100,200'</span><span class="p">);</span> <span class="c1">// меняем одну точку на сразу несколько</span>
<span class="nx">p</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// lineTo 100 100</span>
<span class="nx">p</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="c1">// lineTo 100 200</span>
</pre></div>
<h4>points</h4>
<p>Сразу все точки.</p>
<div class="highlight highlight-js"><pre><span class="nx">p</span><span class="p">.</span><span class="nx">points</span><span class="p">();</span> <span class="c1">// -&gt; [{f:'moveTo', ...}, {f:'lineTo', ...}]</span>
<span class="nx">p</span><span class="p">.</span><span class="nx">points</span><span class="p">(</span><span class="s1">'M0,0 L0,100'</span><span class="p">);</span>
<span class="nx">p</span><span class="p">.</span><span class="nx">points</span><span class="p">([</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">]</span> <span class="p">])</span>
</pre></div>
<h4>before</h4>
<p>Вставляет новые точки перед точкой с указанным индексом.</p>
<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">path</span><span class="p">(</span><span class="s1">'M10,10 L0,0'</span><span class="p">);</span>
<span class="nx">p</span><span class="p">.</span><span class="nx">before</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'L0,10'</span><span class="p">);</span>
<span class="c1">// M10,10 L0,10 L0,0</span>
</pre></div>
<h4>after</h4>
<p>После.</p>
<h4>remove</h4>
<p>Переопределённая унаследованная от Shape функция: если мы передаём индекс точки - удаляет её, ничего не передаём - всё также удаляет всю фигуру.</p>



<br/><br/>
	  <h2 id="text">Text</h2>
<p>Текст. Параметры: <code>text</code>, <code style="opacity:0.5">font</code> <em>(опционально)</em>, <code>x</code>, <code>y</code>, ну и, как всегда, опциональные <code>fill</code> и <code>stroke</code>.</p>
<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">tex1</span><span class="p">,</span> <span class="nx">tex2</span><span class="p">;</span>
<span class="nx">tex1</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">"Hello, world!"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">"black"</span><span class="p">);</span>
<span class="nx">tex2</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">"Foo"</span><span class="p">,</span> <span class="s2">"Arial 1em italic"</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s2">"black 2px"</span><span class="p">),</span>
<span class="c1">// fill=null</span>

<span class="nx">ctx</span><span class="p">.</span><span class="nx">text</span><span class="p">({</span>
    <span class="nx">text</span><span class="o">:</span> <span class="s1">'Bar'</span><span class="p">,</span>
    <span class="nx">x</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="nx">y</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="nx">align</span><span class="o">:</span> <span class="s1">'center'</span>
    <span class="c1">// font, align, baseline, width</span>
<span class="p">});</span>
</pre></div>
<h3>Методы</h3>
<h4>text, x, y</h4>
<p>Изменяют / возвращают соответствующие параметры.</p>
<div class="highlight highlight-js"><pre><span class="nx">tex1</span><span class="p">.</span><span class="nx">text</span><span class="p">();</span> <span class="c1">// -&gt; "Hello, world!"</span>
<span class="nx">tex1</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">"Abc"</span><span class="p">);</span>
<span class="nx">tex1</span><span class="p">.</span><span class="nx">text</span><span class="p">();</span> <span class="c1">// -&gt; "Abc"</span>
</pre></div>
<h4>font</h4>
<p>Возвращает шрифт в разных форматах, либо изменяют.</p>
<p><strong>Отдельно отмечу: </strong>строковый формат гораздо более гибкий, чем стандартный формат canvas-а. Стандартный требует точно такого порядка: <code>[italic] [bold] size font</code>, здесь же можно указывать в любом порядке: Graphics2D вытянет всё нужное сам, так что можно даже так: <code>Comic 2px italic Sans bold MS</code> (правда, Comic Sans всё равно не стоит использовать).</p>
<div class="highlight highlight-js"><pre><span class="nx">tex1</span><span class="p">.</span><span class="nx">font</span><span class="p">();</span> <span class="c1">// -&gt; "italic bold 10px Arial"</span>
<span class="nx">tex1</span><span class="p">.</span><span class="nx">font</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span> <span class="c1">// -&gt; { italic:true, bold:true, size:10, family:"Arial" }</span>

<span class="nx">tex1</span><span class="p">.</span><span class="nx">font</span><span class="p">(</span><span class="s2">"20pt"</span><span class="p">);</span> <span class="c1">// изменяет только указанные параметры</span>
<span class="nx">tex1</span><span class="p">.</span><span class="nx">font</span><span class="p">({</span> <span class="nx">bold</span><span class="o">:</span><span class="kc">false</span> <span class="p">});</span>
</pre></div>
<p>Если вдруг само название шрифта содержит слово <code>bold</code> или <code>italic</code>, юзать:</p>
<h4>family / size / bold / italic</h4>
<p>Всё те же параметры отдельными функциями.</p>
<div class="highlight highlight-js"><pre><span class="nx">tex1</span><span class="p">.</span><span class="nx">family</span><span class="p">(</span><span class="s2">"Myfont bold"</span><span class="p">)</span>
<span class="nx">tex1</span><span class="p">.</span><span class="nx">family</span><span class="p">();</span> <span class="c1">// -&gt; "Myfont bold"</span>

<span class="nx">tex1</span><span class="p">.</span><span class="nx">size</span><span class="p">();</span> <span class="c1">// -&gt; 10</span>
<span class="nx">tex1</span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="s1">'20px'</span><span class="p">);</span>

<span class="nx">tex1</span><span class="p">.</span><span class="nx">bold</span><span class="p">();</span> <span class="c1">// -&gt; true</span>
<span class="nx">tex1</span><span class="p">.</span><span class="nx">bold</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
</pre></div>
<h4>align / baseline</h4>
<p>Align - горизонтальное расположение (<code>left</code>, <code>center</code>, <code>right</code>). Baseline - вертикальное (<code>top</code>, <code>middle</code>, <code>bottom</code>, <code>ideographic</code>, <code>alphabetic</code>).</p>
<h4>underline</h4>
<p>Подчёркивание текста. Можно с помощью <code>true</code> / <code>false</code> включать / выключать, а также указывать цвет / толщину (по умолчанию - размер/5).</p>
<div class="highlight highlight-js"><pre><span class="nx">tex1</span><span class="p">.</span><span class="nx">underline</span><span class="p">();</span> <span class="c1">// -&gt; [null, null]</span>
<span class="nx">tex1</span><span class="p">.</span><span class="nx">underline</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span> <span class="c1">// включили</span>
<span class="nx">tex1</span><span class="p">.</span><span class="nx">underline</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span> <span class="c1">// выключили</span>

<span class="c1">// или так</span>
<span class="nx">tex1</span><span class="p">.</span><span class="nx">underline</span><span class="p">(</span><span class="s2">"3px red"</span><span class="p">);</span>
<span class="nx">tex1</span><span class="p">.</span><span class="nx">underline</span><span class="p">();</span> <span class="c1">// -&gt; [3, 'red']</span>
</pre></div>
<h4>width</h4>
<p>Возвращает либо ширину текста (в оригинале), либо - если мы его принудительно уменьшили - уменьшенную. А также позволяет ставить+изменять эту самую принудительную ширину.</p>
<div class="highlight highlight-js"><pre><span class="nx">tex1</span><span class="p">.</span><span class="nx">width</span><span class="p">();</span> <span class="c1">// -&gt; 55.01953125</span>
<span class="nx">tex1</span><span class="p">.</span><span class="nx">width</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
<span class="nx">tex1</span><span class="p">.</span><span class="nx">width</span><span class="p">();</span> <span class="c1">// -&gt; 30</span>
</pre></div>
<br/><br/>



<h2 id="textblock">TextBlock</h2>
<p>Текстовый блок. Здесь мы уже указываем координаты и размеры блока, в котором текст. Текст умеет автопереноситься (по ширине блока), а также переноситься вручную (по <code>\n</code>).</p>
<p>Параметры: <code>text</code>, <code style="opacity:0.5">font</code> <em>(опционально)</em>, <code>x</code>, <code>y</code>, <code style="opacity:0.5">width</code> (ширина, опционально), опциональные <code>fill</code> и <code>stroke</code>.</p>
<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">tb</span><span class="p">,</span> <span class="nx">auto</span><span class="p">;</span>
<span class="nx">tb</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">textblock</span><span class="p">(</span><span class="s2">"Hello,\ntextblock!"</span><span class="p">,</span> <span class="s2">"Arial 0.7em"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">'black'</span><span class="p">);</span>
<span class="nx">auto</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">textblock</span><span class="p">(</span><span class="s2">"А это такой очень большой текст,"</span> <span class="o">+</span> 
           <span class="s2">"и он будет автопереноситься по ширине"</span> <span class="o">+</span>
           <span class="s2">"блока"</span><span class="p">,</span><span class="s2">"Arial 13pt"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="s1">'red'</span><span class="p">);</span>
<span class="c1">// причём "Arial 0.7em" и "Arial 13pt" можно спокойно пропустить</span>
</pre></div>
<p>Также можно в width указать <code>"auto"</code>.</p>
<h3>Методы</h3>
<h4>Унаследованные от text</h4>
<p>Все они: <code>x</code>, <code>y</code>, <code>font</code>, <code>family</code>, <code>size</code>, <code>bold</code>, <code>italic</code>, <code>align</code>, <code>underline</code>.</p>
<p>Baseline не поддерживается.</p>
<h4>width</h4>
<p>Возвращает / изменяет ширину блока. Если блок без ширины - вычисляет и возвращает.</p>
<div class="highlight highlight-js"><pre><span class="nx">t</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">textblock</span><span class="p">(</span><span class="s2">"Lorem ipsum ля-ля-ля"</span><span class="p">,</span> <span class="s2">"Arial 13pt"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">'red'</span><span class="p">);</span>
<span class="nx">t</span><span class="p">.</span><span class="nx">width</span><span class="p">();</span> <span class="c1">// -&gt; 171.6767578125</span>

<span class="nx">t</span><span class="p">.</span><span class="nx">width</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span> <span class="c1">// устанавливаем ширину - текст начинает автопереноситься</span>
<span class="nx">t</span><span class="p">.</span><span class="nx">width</span><span class="p">();</span> <span class="c1">// -&gt; 100</span>
</pre></div>
<h4>height</h4>
<p>Вычисляет и возвращает высоту блока. Устанавливать <strong>не может</strong>: у блоков нет высоты.</p>
<div class="highlight highlight-js"><pre><span class="nx">t</span><span class="p">.</span><span class="nx">height</span><span class="p">();</span> <span class="c1">// -&gt; 51</span>
</pre></div>
<h4>lineHeight</h4>
<p>Высота 1 строки - ставит / возвращает.</p>
<div class="highlight highlight-js"><pre><span class="nx">t</span><span class="p">.</span><span class="nx">lineHeight</span><span class="p">();</span> <span class="c1">// -&gt; 17</span>
<span class="nx">t</span><span class="p">.</span><span class="nx">lineHeight</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
<span class="nx">t</span><span class="p">.</span><span class="nx">lineHeight</span><span class="p">();</span> <span class="c1">// -&gt; 30</span>
</pre></div>
<h4>limit</h4>
<p>Лимит строк (например, при лимите 2 будет обрезана 3 строка и все последующие). По умолчанию - <code>Infinity</code>.</p>


<br/><br/>
	  <h2 id="image">Image</h2>
	  <p>Изображение. Параметры: <code>image</code>, <code>x</code>, <code>y</code> (координаты левого верхнего угла), <code>width</code>, <code>height</code> (необязательные ширина и длина).</p>
<div class="highlight highlight-js"><pre><span class="c1">// image, x, y, [width], [height]</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="s1">'./image.jpg'</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>

<span class="c1">// document.getElementById('img')</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="s1">'#img'</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Image</span><span class="p">;</span>
<span class="nx">i</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s1">'abc'</span><span class="p">;</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">image</span><span class="p">({</span>
  <span class="nx">image</span><span class="o">:</span><span class="nx">i</span><span class="p">,</span>
  <span class="nx">x</span><span class="o">:</span><span class="mi">10</span><span class="p">,</span>
  <span class="nx">y</span><span class="o">:</span><span class="mi">10</span><span class="p">,</span>
  <span class="nx">width</span><span class="o">:</span> <span class="s1">null</span><span class="p">,</span> <span class="c1">// сохраняются пропорции</span>
  <span class="nx">height</span><span class="o">:</span><span class="mi">200</span><span class="p">,</span>
  <span class="nx">crop</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">]</span> <span class="c1">// обрезка в координатах картинки</span>
<span class="p">});</span>
</pre></div>
		<h3>Методы</h3>
		<h4>x / y / width / height</h4>
		<h4>x1 / y1 / x2 / y2</h4>
		<p>Работают аналогично аналогичным методам <a href="http://keyten.github.io/Graphics2D/docs_ru/rect.html">прямоугольника</a>. Только width и height ещё умеют возвращать размеры самой картинки.</p>
		<h4>crop</h4>
		<p>Обрезается картинка по прямоугольнику (используются координаты самой картинки).</p>
<div class="highlight highlight-js"><pre><span class="nx">image</span><span class="p">.</span><span class="nx">crop</span><span class="p">();</span> <span class="c1">// -&gt; [0,0,10,10]</span>
<span class="nx">image</span><span class="p">.</span><span class="nx">crop</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
<span class="nx">image</span><span class="p">.</span><span class="nx">crop</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">]);</span>
</pre></div><br/><br/>



	  <h2 id="gradient">Gradient</h2>
<p>Градиенты бывают линейные (<code>linear</code>) и радиальные (<code>radial</code>).</p>

<p>У линейных есть 2 точки - начало и конец.</p>

<p>У радиальных - эти точки ещё и имеют радиус. Кроме того, можно регулировать другими параметрами - <code>center</code> (центр), <code>hilite</code> (смещение, блик), <code>radius</code> (конечный радиус), <code>startRadius</code> (начальный радиус), <code>destination</code> (вместо радиуса - точка, до которой распространяется градиент).</p>
<!-- дальше читать осторожно - код сгенерирован!-->
<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">gradient</span><span class="p">(</span><span class="s1">'linear'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'green'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">],</span> <span class="s1">'top'</span><span class="p">,</span> <span class="s1">'bottom'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">gradient</span><span class="p">(</span><span class="s1">'radial'</span><span class="p">,</span> <span class="p">{</span> <span class="s2">"0"</span><span class="o">:</span> <span class="s1">'blue'</span><span class="p">,</span> <span class="s2">"0.5"</span><span class="o">:</span> <span class="s1">'red'</span> <span class="p">},</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">]);</span>
<span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">gradient</span><span class="p">({</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s1">'radial'</span><span class="p">,</span>
  <span class="nx">colors</span><span class="o">:</span> <span class="p">[</span><span class="s1">'red'</span><span class="p">,</span> <span class="s1">'orange'</span><span class="p">,</span> <span class="s1">'yellow'</span><span class="p">,</span> <span class="s1">'green'</span><span class="p">,</span> <span class="s1">'cyan'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">,</span> <span class="s1">'purple'</span><span class="p">],</span>
  <span class="nx">center</span><span class="o">:</span> <span class="s1">'center'</span><span class="p">,</span>
  <span class="nx">startRadius</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="nx">radius</span><span class="o">:</span> <span class="mi">100</span>
<span class="p">});</span>

<span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">g</span><span class="p">);</span>
</pre></div>

<p>Кроме того, мы можем создать инлайновый градиент.</p>

<div class="highlight highlight-js"><pre><span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">colors</span><span class="o">:</span> <span class="p">[</span><span class="s1">'red'</span><span class="p">,</span> <span class="s1">'transparent'</span><span class="p">],</span>
  <span class="nx">from</span><span class="o">:</span> <span class="s1">'top'</span><span class="p">,</span>
  <span class="nx">to</span><span class="o">:</span> <span class="s1">'bottom'</span><span class="p">,</span>
  <span class="nx">type</span><span class="o">:</span> <span class="s1">'linear'</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="user-content-%D0%9C%D0%B5%D1%82%D0%BE%D0%B4%D1%8B" class="anchor" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4%D1%8B" aria-hidden="true"><span class="octicon octicon-link"></span></a>Методы</h3>

<h4>
<a name="user-content-colormixindex" class="anchor" href="#colormixindex" aria-hidden="true"><span class="octicon octicon-link"></span></a>colorMix(index)</h4>

<p>Высчитывает средний цвет (возвращает массив).</p>

<div class="highlight highlight-js"><pre><span class="nx">ctx</span><span class="p">.</span><span class="nx">gradient</span><span class="p">(</span><span class="s1">'linear'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'white'</span><span class="p">,</span> <span class="s1">'black'</span><span class="p">],</span> <span class="s1">'top'</span><span class="p">,</span> <span class="s1">'bottom'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">colorMix</span><span class="p">(</span><span class="mf">0.5</span><span class="p">);</span> <span class="c1">// -&gt; [128, 128, 128, 1]</span>
</pre></div>

<h4>
<a name="user-content-colorindex-value" class="anchor" href="#colorindex-value" aria-hidden="true"><span class="octicon octicon-link"></span></a>color(index, [value])</h4>

<p>Возвращает / устанавливает цвет.</p>

<div class="highlight highlight-js"><pre><span class="nx">grad</span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// -&gt; "red"</span>
<span class="nx">grad</span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">'green'</span><span class="p">);</span>
</pre></div>

<h4>
<a name="user-content-colorsvalue" class="anchor" href="#colorsvalue" aria-hidden="true"><span class="octicon octicon-link"></span></a>colors([value])</h4>

<p>Все цвета (возвращает в виде хэша <code>{индекс:цвет}</code>).</p>

<div class="highlight highlight-js"><pre><span class="nx">grad</span><span class="p">.</span><span class="nx">colors</span><span class="p">();</span> <span class="c1">// -&gt; {0:'red', 0.5:'green', 1:'blue'}</span>
<span class="nx">grad</span><span class="p">.</span><span class="nx">colors</span><span class="p">([</span><span class="s1">'red'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">]);</span>
</pre></div>

<h4>
<a name="user-content-from--to" class="anchor" href="#from--to" aria-hidden="true"><span class="octicon octicon-link"></span></a>from / to</h4>

<p>Возвращает / устанавливает. Работают все точки, как и у трансформаций (<code>left top</code>, <code>top</code>, <code>tl</code>, <code>[0,0]</code>, <code>{x:10, y:10}</code>).</p>

<p>С радиальными градиентами юзать массивы из 3 значений.</p>

<h4>
<a name="user-content-startradiusvalue--radiusvalue" class="anchor" href="#startradiusvalue--radiusvalue" aria-hidden="true"><span class="octicon octicon-link"></span></a>startRadius([value]) / radius([value])</h4>

<h4>
<a name="user-content-centerx-y--hilitex-y--destinationx-y" class="anchor" href="#centerx-y--hilitex-y--destinationx-y" aria-hidden="true"><span class="octicon octicon-link"></span></a>center([x, y]) / hilite([x, y]) / destination([x, y])</h4>

<p>Возвращают / устанавливают. Для <code>center</code> / <code>hilite</code> / <code>destination</code> можно передать 2 координаты, либо массив из 2 координат.</p>

<h3>
<a name="user-content-%D0%9E%D1%82%D0%B4%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9-%D0%BC%D0%BE%D0%BC%D0%B5%D0%BD%D1%82" class="anchor" href="#%D0%9E%D1%82%D0%B4%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9-%D0%BC%D0%BE%D0%BC%D0%B5%D0%BD%D1%82" aria-hidden="true"><span class="octicon octicon-link"></span></a>Отдельный момент</h3>

<p>Изменение градиента обновляет все залитые им фигуры. Например:</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">grad</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">gradient</span><span class="p">(</span><span class="s1">'linear'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'red'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">],</span> <span class="s1">'top'</span><span class="p">,</span> <span class="s1">'bottom'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">rect</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="nx">grad</span><span class="p">);</span>
<span class="nx">grad</span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">'yellow'</span><span class="p">);</span> <span class="c1">// rect обновится с новым градиентом</span>
</pre></div>

<p>А также можно сделать так:</p>

<div class="highlight highlight-js"><pre><span class="nx">rect</span><span class="p">.</span><span class="nx">fill</span><span class="p">().</span><span class="nx">color</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// -&gt; ...</span>
</pre></div>

<p>Стоит быть осторожным, если вы заливаете одним градиентом несколько объектов сразу.</p>
<br/><br/>



<h2 id="pattern">Pattern</h2>
<p><code>Pattern</code> - текстура (тоже самое, что и изображение, но умеет повторяться + можно ей залить фигуру).</p>

<p>Тоже умеет быть инлайновой.</p>

<div class="highlight highlight-js"><pre><span class="c1">// второй параметр - повторяться ли (true, false, 'x', 'y'). По умолч. - true</span>
<span class="kd">var</span> <span class="nx">pat</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">pattern</span><span class="p">(</span><span class="s1">'./img.png'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">pt2</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">pattern</span><span class="p">(</span><span class="s1">'#image'</span><span class="p">,</span> <span class="s1">'x'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Image</span><span class="p">;</span>
<span class="nx">i</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s1">'../img.jpg'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">pt3</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">pattern</span><span class="p">({</span>
  <span class="nx">image</span><span class="o">:</span> <span class="nx">i</span><span class="p">,</span>
  <span class="nx">repeat</span><span class="o">:</span> <span class="kc">false</span>
<span class="p">});</span>

<span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'./img.jpg'</span><span class="p">);</span>
<span class="c1">// ссылка должна начинаться с 'http://' или с '.'</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">image</span><span class="o">:</span> <span class="s1">'./png.jpg.gif'</span><span class="p">,</span>
  <span class="nx">repeat</span><span class="o">:</span> <span class="s1">'y'</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="user-content-%D0%9C%D0%B5%D1%82%D0%BE%D0%B4%D1%8B-1" class="anchor" href="#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4%D1%8B-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Методы</h3>

<h4>
<a name="user-content-repeatvalue" class="anchor" href="#repeatvalue" aria-hidden="true"><span class="octicon octicon-link"></span></a>repeat([value])</h4>

<p>Возвращает / устанавливает. Допустимые варианты: <code>true</code>, <code>false</code>, <code>'x'</code>, <code>'y'</code>.</p>

<p>Изменение параметра обновляет все залитые текстурой фигуры.</p>





			</section>
		</div>

		<!-- FOOTER	-->
		<div id="footer_wrap" class="outer">
			<footer class="inner">
				<p class="copyright">Graphics2D maintained by <a href="https://github.com/keyten">keyten</a></p>
				<p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
			</footer>
		</div>

		

	</body>
</html>
