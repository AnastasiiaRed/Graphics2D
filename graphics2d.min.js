!function(a,b){function c(a,b){return M||(M=E.createElement("canvas")),M.width=a,M.height=b,M}function d(){for(var a,b,c=0,e=D._queue.length,f=Date.now();c<e;c++)a=D._queue[c],b=(f-a.startTime)/a.duration,b<0||(b>1&&(b=1),a.now=f,a.pos=a.easing(b),D.fx.step[a.prop](a),0===a.state&&(a.state=1),1===b&&(a.callback&&a.callback.call(a.elem,a),a.elem._queue?(a.elem._queue.shift(),a.elem._queue.length>0?(D._queue[c]=a=a.elem._queue[0],a.startTime=Date.now(),a.endTime=a.startTime+a.duration):(a.elem._queue=null,D._queue.splice(c,1),c--,e--)):(a.elem._queue=null,D._queue.splice(c,1),c--,e--)));a.elem.update(),e>0?L(d):N=!1}function e(a,b){0===a.state&&(a.elem._matrixStart=a.elem._matrix||[1,0,0,1,0,0],a.elem._matrixCur=[],a.elem.corner?a.corner=a.elem.corner(a.elem._origin||"center"):a.corner=[0,0]),a.elem._matrixCur.now!==a.now&&(a.elem._matrixCur=[1,0,0,1,0,0]);var c=b(a);c[4]+=a.corner[0]-a.corner[0]*c[0]-a.corner[1]*c[2],c[5]+=a.corner[1]-a.corner[0]*c[1]-a.corner[1]*c[3],a.elem._matrixCur=D.multiply(a.elem._matrixCur,c),a.elem._matrixCur.now=a.now,a.elem._matrix=D.multiply(a.elem._matrixStart,a.elem._matrixCur)}function f(a){D.easing[P+"In"]=a,D.easing[P+"Out"]=function(b,c){return 1-a(1-b,c)},D.easing[P+"InOut"]=function(b,c){return b<=.5?a(2*b,c)/2:(2-a(2*(1-b),c))/2}}function g(a,b,c,d){c<0&&(c=-c,a-=c),d<0&&(d=-d,b-=d),this.x=this.x1=a,this.y=this.y1=b,this.w=this.width=c,this.h=this.height=d,this.x2=a+c,this.y2=b+d,this.cx=a+c/2,this.cy=b+d/2}function h(a,b){b||(b=a,a=null);var c=function(){return(this.initialize||F).apply(this,arguments)};if(a){b.liftInits&&(c=function(){if(c.prototype.__initialize__)return c.prototype.__initialize__.apply(this,arguments);for(var a=[],d=this.constructor.parent;d;)a.push(d.prototype.initialize),d=d.parent;for(var e=a.length;e--;)a[e]&&a[e].apply(this,arguments);return c.prototype.initialize&&b.initialize===c.prototype.initialize?c.prototype.initialize.apply(this,arguments):void 0});var d=function(){};d.prototype=a.prototype,c.prototype=new d,c.prototype.superclass=a.prototype,c.prototype.constructor=c,c.prototype.super=function(b,c){if(!this.superclass.superclass||!this.superclass.superclass[b])return this.superclass[b].apply(this,c);var d=this.superclass;this.superclass=this.superclass.superclass;var e=d[b].apply(this,c);return this.superclass=a.prototype,e}}return i(c.prototype,b),c}function i(a,b){return Object.assign(a,b)}function j(a){return function(b){return this.argument(a,b)}}function k(a){var b=a[1];return a=H.call(a,2),function(){this[b].apply(this,a)}}function l(a){return"[object Object]"===G.call(a)}function m(a){return Array.isArray(a)||a in D.corners}function n(a){return+a===a||a+""===a&&D.reNumberLike.test(a)}function o(a){return a instanceof Image||l(a)&&I(a,"image")||a+""===a&&!(a.indexOf("http://")&&a.indexOf("https://")&&a.indexOf("./")&&a.indexOf("../")&&a.indexOf("data:image/")&&a.indexOf("<svg"))}function p(a,c){if(a!==b){if(!a)return 0;if(D.snapToPixels&&!c)return Math.round(D.distance(a,!0)/D.snapToPixels)*D.snapToPixels;if(+a===a)return"px"!==D.unit?D.distance(a+""+D.unit):a;if(a+="",a.indexOf("px")===a.length-2)return parseInt(a);if(!D.units)if(E){var d=E.createElement("div");E.body.appendChild(d),D.units={},Q.forEach(function(a){d.style.width="1"+a,D.units[a]=parseFloat(getComputedStyle(d).width)}),E.body.removeChild(d)}else D.units=R;var e=a.replace(/[\d\.]+?/g,"");return a=a.replace(/[^\d\.]+?/g,""),""===e?a:Math.round(D.units[e]*a)}}var q,r,s,t,u,v,w,x,y,z,A,B,g,C,D={},E=a.document,F=function(){},G=Object.prototype.toString,H=Array.prototype.slice,I=Function.prototype.call.bind(Object.prototype.hasOwnProperty),J=/^\d*\.\d+$/,K=a.URL||a.webkitURL||a,L=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){return a.setTimeout(b,1e3/60)};a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.mozCancelAnimationFrame||a.oCancelAnimationFrame||a.msCancelAnimationFrame||a.cancelRequestAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||a.clearTimeout;D.renderers={},D.renderers["2d"]={init:function(a,b){a.context=b.getContext("2d"),a._cache={}},preRedraw:function(a,b){a.save(),a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,a.canvas.width,a.canvas.height),b.matrix&&a.setTransform.apply(a,b.matrix)},postRedraw:function(a){a.restore()},drawCircle:function(a,b,c,d,e){this.pre(b,c,d,e),b.beginPath(),b.arc(a[0],a[1],Math.abs(a[2]),0,2*Math.PI,!0),this.post(b,c)},drawRect:function(a,b,c,d,e){this.pre(b,c,d,e),c.fillStyle&&b.fillRect(a[0],a[1],a[2],a[3]),c.strokeStyle&&b.strokeRect(a[0],a[1],a[2],a[3]),b.restore()},drawCircle:function(a,b,c,d,e){this.pre(b,c,d,e),b.beginPath(),b.arc(a[0],a[1],a[2],0,2*Math.PI,!0),c.fillStyle&&b.fill(),c.strokeStyle&&b.stroke(),b.restore()},drawPath:function(a,b,c,d,e){this.pre(b,c,d,e),b.beginPath(),a.forEach(function(a){a.process(b)}),this.post(b,c)},drawImage:function(a,b,c,d,e){switch(this.pre(b,c,d,e),a.length){case 5:b.drawImage(a[0],a[1],a[2],a[3],a[4]);break;case 9:b.drawImage(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8]);break;default:b.drawImage(a[0],a[1],a[2])}b.restore()},drawData:function(a,b,c,d,e){b.putImageData(a[0],a[1],a[2])},drawText:function(a,b,c,d,e){this.pre(b,c,d,e),c.fillStyle&&b.fillText(a[0],a[1],a[2]),c.strokeStyle&&b.strokeText(a[0],a[1],a[2]),b.restore()},pre:function(a,b,c,d){a.save(),Object.keys(b).forEach(function(c){a[c]=b[c]}),b.fillStyle&&b.fillStyle.toCanvasStyle&&(a.fillStyle=b.fillStyle.toCanvasStyle(a,d)),b.strokeStyle&&b.strokeStyle.toCanvasStyle&&(a.strokeStyle=b.strokeStyle.toCanvasStyle(a,d)),b.lineDash&&(a.setLineDash?a.setLineDash(b.lineDash):a.mozDash=b.lineDash),c&&a.transform(c[0],c[1],c[2],c[3],c[4],c[5])},post:function(a,b){b.fillStyle&&a.fill(),b.strokeStyle&&a.stroke(),a.restore()}};var q;q=function(a,b){this.canvas=a,this.elements=[],this.listeners={},this.renderer=D.renderers[b||"2d"],this.renderer.init(this,a),this.updateNowBounded=this.updateNow.bind(this)},q.prototype={object:function(a){return this.push(Object.assign(new r,a))},rect:function(){return this.push(new t(arguments,this))},circle:function(){return this.push(new u(arguments,this))},path:function(){return this.push(new w(arguments,this))},image:function(){return this.push(new x(arguments,this))},raster:function(){return this.push(new y(arguments,this))},text:function(){return this.push(new z(arguments,this))},line:function(a,b,c,d,e){return this.path([[a,b],[c,d]],null,e)},quadratic:function(a,b,c,d,e,f,g){return this.path([[a,b],[c,d,e,f]],null,g)},bezier:function(a,b,c,d,e,f,g,h,i){return this.path([[a,b],[c,d,e,f,g,h]],null,i)},arcTo:function(a,b,c,d,e,f,g){return this.path([[a,b],["arcTo",a,b,c,d,e,f]],null,g)},gradient:function(a,b,c,d){return new A(a,b,c,d,this)},pattern:function(a,b){return new B(a,b,this)},push:function(a){return a.context=this,this.elements.push(a),a.draw&&a.draw(this.context),a},update:function(){this._willUpdate||(this._willUpdate=!0,L(this.updateNowBounded))},updateNow:function(){var a=this.context;this.renderer.preRedraw(a,this),this.elements.forEach(function(b){b.draw(a)}),this.renderer.postRedraw(a),this._willUpdate=!1},getObjectInPoint:function(a,b,c){for(var d=this.elements,e=d.length;e--;)if(d[e].isPointIn&&d[e].isPointIn(a,b)&&(d[e].attrs.interaction||!c))return d[e];return null},hoverElement:null,focusElement:null,listener:function(a){return this.listeners[a]?this.listeners[a]:(this.listeners[a]=[],this.eventsHooks.hasOwnProperty(a)&&this.eventsHooks[a].call(this,a),this.eventsInteract.indexOf(a)===-1?this.listeners[a]:(this.canvas.addEventListener(a,function(b){var c,d=!0,e=D.coordsOfElement(this.canvas);return b.contextX=b.clientX-e.x,b.contextY=b.clientY-e.y,b.cancelContextPropagation=function(){d=!1},"mouseout"===a?(c=this.hoverElement,this.hoverElement=null):c=this.getObjectInPoint(b.contextX,b.contextY,!0),b.targetObject=c,c&&c.fire&&!c.fire(a,b)?(b.stopPropagation(),void b.preventDefault()):void(d&&this.fire(a,b))}.bind(this)),this.listeners[a]))},eventsInteract:["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","mousewheel","blur","focus","keypress","keydown","keyup","touchstart","touchmove","touchend","touchcancel","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"],eventsHooks:{mouseover:function(){this.listeners.mouseout||(this.listenerSpecial("mouseover","mouseout","hover","mousemove"),this.listener("mouseout"))},mouseout:function(){this.listeners.mouseover||(this.listenerSpecial("mouseover","mouseout","hover","mousemove"),this.listener("mouseover"))},focus:function(){this.listeners.blur||(this.listenerSpecial("focus","blur","focus","mousedown"),this.listener("blur"))},blur:function(){this.listeners.focus||(this.listenerSpecial("focus","blur","focus","mousedown"),this.listener("focus"))}},listenerSpecial:function(a,b,c,d){return c+="Element",this.on(d,function(d){var e=d.targetObject,f=this[c];f!=e&&(f&&f.fire&&f.fire(b,d),e&&e.fire&&e.fire(a,d),this[c]=e)}.bind(this)),this},on:function(a,b){if(a+""!==a){for(var c in a)I(a,c)&&this.on(c,a[c]);return this}return(this.listeners[a]||this.listener(a)).push(b),this},off:function(a,b){b||(this.listeners[a]=[]);var c=this.listeners[a].indexOf(b);return this.listeners=this.listeners[a].slice(0,c).concat(this.listeners[a].slice(c+1)),this},fire:function(a,b){return this.listeners[a]?(this.listeners[a].forEach(function(a){a.call(this,b)}.bind(this)),this):this},matrix:null,transform:function(a,b,c,d,e,f,g){return g&&(g+""===g&&(g=D.corners[g],g=[g[0]*this.canvas.width,g[1]*this.canvas.height]),e=e-a*g[0]+g[0]-c*g[1],f=f-b*g[0]-d*g[1]+g[1]),this.matrix=D.transform(this.matrix||[1,0,0,1,0,0],[a,b,c,d,e,f]),this.update()},translate:function(a,b){return this.transform(1,0,0,1,a,b)},rotate:function(a,b){return a=a/180*Math.PI,this.transform(Math.cos(a),Math.sin(a),-Math.sin(a),Math.cos(a),0,0,b)},scale:function(a,c,d){return(c===b||m(c))&&(d=c,c=a),this.transform(a,0,0,c,0,0,d)},skew:function(a,c,d){return(c===b||m(c))&&(d=c,c=a),this.transform(1,Math.tan(c*Math.PI/180),Math.tan(a*Math.PI/180),1,0,0,d)}};var M;r=new h({initialize:function(a){this.listeners={},this.styles={},this.attrs={interaction:!0}},_visible:!0,update:function(){return this.context&&this.context.update(),this},z:function(a){return a===b?this.context.elements.indexOf(this):("top"===a&&(a=this.context.elements.length),this.context.elements.splice(this.context.elements.indexOf(this),1),this.context.elements.splice(a,0,this),this.update())},remove:function(){return this.context.elements.splice(this.context.elements.indexOf(this),1),this.update()},hide:function(){return this._visible=!1,this.update()},show:function(){return this._visible=!0,this.update()},attr:function(a,c){if(a+""!==a)return Object.keys(a).forEach(function(b){this.attr(b,a[b])}.bind(this)),this;if(c===b)return this.attrHooks[a]&&this.attrHooks[a].get?this.attrHooks[a].get.call(this):this.attrs[a];if(this.attrHooks[a]&&this.attrHooks[a].set){var d=this.attrHooks[a].set.call(this,c);d===b&&this.attrs[a]===b||(this.attrs[a]=d)}else this.attrs[a]=c;return this},attrHooks:{fill:{get:function(){return this.styles.fillStyle},set:function(a){return this.styles.fillStyle=a,this.update()}},stroke:{set:function(a){return r.processStroke(a,this.styles),this.update()}},opacity:{get:function(){return this.styles.globalAlpha!==b?this.styles.globalAlpha:1},set:function(a){return this.styles.globalAlpha=+a,this.update()}},composite:{get:function(){return this.styles.globalCompositeOperation},set:function(a){return this.styles.globalCompositeOperation=a,this.update()}}},style:function(a,c){return c===b?this.styles[a]:(this.styles[a]=c,this.update())},processObject:function(a,b){return I(a,"opacity")&&(this.styles.globalAlpha=a.opacity),I(a,"composite")&&(this.styles.globalCompositeOperation=a.composite),b.map(function(b){return a[b]})},bounds:function(a){if(!this.shapeBounds)throw"Object #"+this.z()+" doesn't have shapeBounds method.";var b=this.shapeBounds();return new g(b[0],b[1],b[2],b[3])},corner:function(a,b){if(Array.isArray(a))return a;var c=this.bounds(b);return[c.x+c.w*D.corners[a][0],c.y+c.h*D.corners[a][1]]},on:function(a,b){if(a+""!==a)for(var c in a)I(a,c)&&this.on(c,a[c]);return b+""===b&&(b=k(arguments)),this.context.listener(a),(this.listeners[a]||(this.listeners[a]=[])).push(b),this},off:function(a,b){return a?b?(this.listeners[a].splice(this.listeners[a].indexOf(b),1),this):(this.listeners[a]=null,this):(this.listeners={},this)},fire:function(a,b){return(this.listeners[a]||[]).forEach(function(a){a.call(this,b)}.bind(this)),this},transform:function(a,b,c,d,e,f,g){if(null===a)this.matrix=null;else{var h=[a,b,c,d,e,f];g&&(g=this.corner(g),h[4]=g[0]+e-a*g[0]-c*g[1],h[5]=g[1]+f-b*g[0]-d*g[1]),this.matrix=D.transform(this.matrix||[1,0,0,1,0,0],h)}return this.update()},translate:function(a,b){return this.transform(1,0,0,1,a,b)},rotate:function(a,b){return a=a/180*Math.PI,this.transform(Math.cos(a),Math.sin(a),-Math.sin(a),Math.cos(a),0,0,b||"center")},scale:function(a,c,d){return c===b&&(c=a),this.transform(a,0,0,c,0,0,d||"center")},skew:function(a,c,d){return c===b&&(c=a),this.transform(1,Math.tan(c),Math.tan(a),1,0,0,d||"center")},toDataURL:function(a,d){if(d===b){if("function"!=typeof this.bounds)throw"Object #"+this.z()+" can't be rasterized: need the bounds.";d=this.bounds()}a===b?a="image/png":a in D.fileTypes&&(a=D.fileTypes[a]);var e=c(d.width,d.height),f=e.getContext("2d");return f.setTransform(1,0,0,1,-d.x,-d.y),this.draw(f),e.toDataURL(a.type||a,a.quality||1)},toImageData:function(a){if(a===b){if("function"!=typeof this.bounds)throw"Object #"+this.z()+" can't be rasterized: need the bounds.";a=this.bounds()}var d=c(a.width,a.height),e=d.getContext("2d");return e.setTransform(1,0,0,1,-a.x,-a.y),this.draw(e),e.getImageData(0,0,a.width,a.height)}}),r.processStroke=function(a,b){if(a+""===a){a=a.replace(/\,\s/g,",").split(" ");for(var c,d=a.length;d--;)J.test(a[d])?c=parseFloat(a[d]):n(a[d])?b.lineWidth=D.distance(a[d]):"round"===a[d]?(b.lineJoin=b.lineJoin||"round",b.lineCap=b.lineCap||"round"):"miter"===a[d]||"bevel"===a[d]?b.lineJoin=a[d]:"butt"===a[d]||"square"===a[d]?b.lineCap=a[d]:"["===a[d][0]||a[d]in D.dashes||(b.strokeStyle=a[d]);c&&(a=D.color(b.strokeStyle),a[3]=c,b.strokeStyle="rgba("+a.join(",")+")")}},s=new h(C,{liftInits:!0,initialize:function(a){this.listeners={},this.styles={};var b,c=this.constructor.props,d=this.constructor.propHandlers||{};if(l(a[0])&&this.constructor.firstObject)this.object=a[0],this.constructor.processStyle&&this.parseFromObject(a[0]);else if(c)for(b=Math.min(c.length,a.length),this.constructor.processStyle&&(a.length-c.length>1&&this.stroke(a[b+1]),a.length-c.length>0&&this.fill(a[b]));b--;)d[b]?this["_"+c[b]]=d[b](a[b]):this["_"+c[b]]=a[b]},draw:function(a){this._visible&&(a.save(),this.styleToContext(a),this._matrix&&a.transform.apply(a,this._matrix),this.processPath(a),this.styles.fillStyle&&a.fill(),this.styles.strokeStyle&&a.stroke(),a.restore())},update:function(){return this.context?(this.context.update(),this):this},prop:function(a,c){return c===b?this["_"+a]:(this["_"+a]=c,this.update())},mouse:function(a){return this.prop("interaction",!!a)},z:function(a){var c=this.context.elements.indexOf(this);return a===b?c:("top"===a&&(a=this.context.elements.length),this.context.elements.splice(c,1),this.context.elements.splice(a,0,this),this.update())},clone:function(a,b){var c=new this.constructor([],this.context);for(var d in this)D.has(this,d)&&"_"===d[0]&&("object"!=typeof this[d]||null===this[d]||"_image"===d||a===!0&&"_style"===d?c[d]=this[d]:c[d]=D.clone(this[d]));return b===!0&&(c.listeners=this.listeners),this.context.push(c)},remove:function(){return this.context.elements.splice(this.context.elements.indexOf(this),1),this.update()},cursor:function(a){return a===b?this._cursor:(this._cursor=a,null===a?this.off("mouseover",this._cursorListenerOn).off("mouseout",this._cursorListenerOff):(this._cursorListenerOn||(this._cursorListenerOn=function(){var a=this.context.canvas;this._oldCursor=a.style.cursor,a.style.cursor=this._cursor},this._cursorListenerOff=function(){var a=this.context.canvas;a.style.cursor===this._cursor&&(a.style.cursor=this._oldCursor)},this.mouseover(this._cursorListenerOn).mouseout(this._cursorListenerOff)),this))},on:function(b,c){if(isString(c)&&(c=k(arguments)),l(b)){for(var d in b)D.has(b,d)&&(Array.isArray(b[d])?this.on.apply(this,[d].concat(b[d])):this.on(d,b[d]));return this}return isNumber(b)?(a.setTimeout(c.bind(this),b),this):(this.context.listener(b),(this.listeners[b]||(this.listeners[b]=[])).push(c),this)},once:function(a,b){isString(b)&&(b=k(arguments,this));var c;return this.on(a,b),this.on(a,c=function(){this.off(a,b)}),c.proxy=b,this},off:function(a,b){if(!a)return this.listeners={},this;if(!b)return this.listeners[a]=[],this;a=this.listeners[a];var c=a.indexOf(b);return a[c+1].proxy===b?a.splice(c,2):a.splice(c,1),this},fire:function(a,b){if(a=this.listeners[a],!a)return this;for(var c=0,d=a.length;c<d;c++)a.length<d&&(c-=d-a.length,d=a.length),a[c].call(this,b);return this},isPointIn:function(a,b){if(!this.processPath)return!1;var c,d=this.context.context;return d.save(),this._matrix&&d.transform.apply(d,this._matrix),this.processPath(d),c=d.isPointInPath(a,b),d.restore(),c},corner:function(a,b){if(Array.isArray(a))return a;if(l(a)){if(D.has(a,"from")){var c=this.corner(a.from);return[c[0]+a.x,c[1]+a.y]}return[a.x,a.y]}a||(a="center");var d=this.bounds(b);return[d.x+d.w*D.corners[a][0],d.y+d.h*D.corners[a][1]]},bounds:function(a){if(!this.nativeBounds)throw"Object #"+this._z+"hasn't nativeBounds() method.";var b=this.nativeBounds(),c=this._matrix,d=this.styles.lineWidth/2,e=b.x1,f=b.y1,h=b.x2,i=b.y1,j=b.x1,k=b.y2,l=b.x2,m=b.y2;if(a){if("exclude"===a.stroke&&(a.stroke=!0,d*=-1),a.stroke===!0&&(e-=d,f-=d,h+=d,i-=d,j-=d,k+=d,l+=d,m+=d),a.transform===!0&&c){var n=c[0],o=c[1],p=c[2],q=c[3],r=c[4],s=c[5];if(e=[e*n+f*p+r,f=e*o+f*q+s][0],h=[h*n+i*p+r,i=h*o+i*q+s][0],j=[j*n+k*p+r,k=j*o+k*q+s][0],l=[l*n+m*p+r,m=l*o+m*q+s][0],a.points!==!0){var t=Math.min(e,h,j,l),u=Math.max(e,h,j,l),v=Math.min(f,i,k,m),w=Math.max(f,i,k,m);return new g(t,v,u-t,w-v)}}if(a.points===!0)return{lt:[e,f],rt:[h,i],lb:[j,k],rb:[l,m]}}return new g(e,f,l-e,m-f)},transform:function(a,c,d,e,f,g,h){if(a===b)return this._matrix;if(null===a)return this._matrix=null,this.update();h=this.corner(h);var i=[a,c,d,e,-h[0]*a-h[1]*d+f+h[0],-h[0]*c-h[1]*e+g+h[1]];return this._matrix&&(i=D.multiply(this._matrix,i)),this._matrix=i,this.update()},scale:q.prototype.scale,rotate:q.prototype.rotate,skew:q.prototype.skew,translate:q.prototype.translate,toPath:function(){return null},toDataURL:function(a,c){if(c===b){if("function"!=typeof this.bounds)throw"Object #"+this._z+" can't be rasterized: need the bounds.";c=this.bounds({transform:!0,stroke:!0})}var d,e=this.context.context,f=this.context.canvas,g=e.getImageData(0,0,f.width,f.height),h=f.width,i=f.height;return f.width=c.width,f.height=c.height,e.translate(-c.x,-c.y),this.draw(e),e.translate(c.x,c.y),d=f.toDataURL(a),f.width=h,f.height=i,e.putImageData(g,0,0),d},rasterize:function(a,c){if(c===b){if("function"!=typeof this.bounds)throw"Object #"+this._z+" can't be rasterized: need the bounds.";c=this.bounds({transform:!0,stroke:!0})}return this.context.image(this.toDataURL(a,c),c.x,c.y)},animate:function(a,b,c){if(l(a)){l(b)?b.queue=!1:b={duration:b,easing:c,callback:arguments[4],queue:!1},b=D.extend({},b);var d=b.callback,e=Object.keys(a),f=0;for(b.callback=null;f<e.length;f++)f===e.length-1&&(b.callback=d),this.animate(e[f],a[e[f]],b);return this}l(c)||(c={duration:c,easing:arguments[3],callback:arguments[4]});var g=Date.now(),h={elem:this,startTime:g,endTime:g+(c.duration||500),duration:c.duration||500,prop:a,end:b,state:0,easing:D.easing[c.easing]||c.easing||D.easing.linear,callback:c.callback};return c.queue===!1?(D._queue.push(h),D._checkAnimation()):this._queue&&this._queue.length>0?this._queue.push(h):(this._queue=[h],D._queue.push(h),D._checkAnimation()),this},_visible:!0,_interaction:!0,_origin:"center"}),D._queue=[];var N=!1;D._checkAnimation=function(){N||(L(d),N=!0)},D.fx={},D.fx.step={int:function(a){0===a.state&&(a._prop="_"+a.prop,a.start=a.elem[a._prop],isString(a.end)&&(0===a.end.indexOf("+=")?a.end=a.start+Number(a.end.substr(2)):0===a.end.indexOf("-=")&&(a.end=a.start-Number(a.end.substr(2))))),a.elem[a._prop]=Math.round(a.start+(a.end-a.start)*a.pos)},float:function(a){0===a.state&&(a._prop="_"+a.prop,a.start=a.elem[a._prop],isString(a.end)&&(0===a.end.indexOf("+=")?a.end=a.start+Number(a.end.substr(2)):0===a.end.indexOf("-=")&&(a.end=a.start-Number(a.end.substr(2))))),a.elem[a._prop]=a.start+(a.end-a.start)*a.pos},opacity:function(a){0===a.state&&(a.start=a.elem.styles.globalAlpha,a.start===b&&(a.start=1)),a.elem.styles.globalAlpha=a.start+(a.end-a.start)*a.pos},fill:function(a){0===a.state&&(a.start=D.color(a.elem.styles.fillStyle),"transparent"===a.end?a.end=a.start.slice(0,3).concat([0]):a.end=D.color(a.end),"transparent"!==a.elem.styles.fillStyle&&a.elem.styles.fillStyle!==b||(a.start=a.end.slice(0,3).concat([0]))),a.elem.styles.fillStyle="rgba("+[Math.round(a.start[0]+(a.end[0]-a.start[0])*a.pos),Math.round(a.start[1]+(a.end[1]-a.start[1])*a.pos),Math.round(a.start[2]+(a.end[2]-a.start[2])*a.pos),a.start[3]+(a.end[3]-a.start[3])*a.pos].join(",")+")"},stroke:function(a){0===a.state&&(a.color1=D.color(a.elem.styles.strokeStyle),a.width1=a.elem.styles.lineWidth||0,a.width2=end.lineWidth,"transparent"===end.strokeStyle?a.color2=a.color1.slice(0,3).concat([0]):end.strokeStyle&&(a.color2=D.color(end.strokeStyle)),"transparent"!==a.elem.styles.strokeStyle&&a.elem.styles.strokeStyle!==b||!end.strokeStyle||(a.color1=a.color2.slice(0,3).concat([0]))),a.color2&&(a.elem.styles.strokeStyle="rgba("+[Math.round(a.color1[0]+(a.color2[0]-a.color1[0])*a.pos),Math.round(a.color1[1]+(a.color2[1]-a.color1[1])*a.pos),Math.round(a.color1[2]+(a.color2[2]-a.color1[2])*a.pos),a.color1[3]+(a.color2[3]-a.color1[3])*a.pos].join(",")+")"),a.width2&&(a.elem.styles.lineWidth=a.width1+(a.width2-a.width1)*a.pos)},translate:function(a){e(a,function(){return[1,0,0,1,a.end[0]*a.pos,a.end[1]*a.pos]})},rotate:function(a){0===a.state&&"grad"===D.angleUnit&&(a.end=a.end*Math.PI/180),e(a,function(){var b=a.end*a.pos,c=Math.cos(b),d=Math.sin(b);return[c,d,-d,c,0,0]})},skew:function(a){0===a.state&&(a.end.length===b&&(a.end=[a.end,a.end]),"grad"===D.angleUnit&&(a.end[0]=a.end[0]*Math.PI/180,a.end[1]=a.end[1]*Math.PI/180)),e(a,function(){return[1,Math.tan(a.end[1]*a.pos),Math.tan(a.end[0]*a.pos),1,0,0]})},scale:function(a){0===a.state&&a.end.length===b&&(a.end=[a.end,a.end]),e(a,function(){return[1+(a.end[0]-1)*a.pos,0,0,1+(a.end[1]-1)*a.pos,0,0]})},origin:function(a){0===a.state&&(a.elem._origin=a.elem.corner(a.end))}},["click","dblclick","mousedown","mousewheel","mouseup","mousemove","mouseover","mouseout","focus","blur","touchstart","touchmove","touchend","keypress","keydown","keyup"].forEach(function(a){s.prototype[a]=q.prototype[a]=function(b){return"function"==typeof b||b+""===b?this.on.apply(this,[a].concat(H.call(arguments))):this.fire.apply(this,arguments)}}),["x","y","width","height","cx","cy","radius"].forEach(function(a){D.fx.step[a]=D.fx.step.int}),D.fn=s.prototype,t=new h(r,{initialize:function(a,b){this.super("initialize",arguments),l(a[0])&&(a=this.processObject(a[0],t.args)),this.attrs.x=a[0],this.attrs.y=a[1],this.attrs.width=a[2],this.attrs.height=a[3],a[4]&&(this.styles.fillStyle=a[4]),a[5]&&r.processStroke(a[5],this.styles)},attrHooks:i(Object.assign({},r.prototype.attrHooks),{x:{set:function(a){return this.update(),a}},y:{set:function(a){return this.update(),a}},width:{set:function(a){return this.update(),a}},height:{set:function(a){return this.update(),a}},x1:{get:function(){return this.attrs.x},set:function(a){this.attrs.x=a,this.update()}},y1:{get:function(){return this.attrs.y},set:function(a){this.attrs.y=a,this.update()}},x2:{get:function(){return this.attrs.x+this.attrs.width},set:function(a){this.attrs.width=a-this.attrs.x,this.update()}},y2:{get:function(){return this.attrs.y+this.attrs.height},set:function(a){this.attrs.height=a-this.attrs.y,this.update()}}}),shapeBounds:function(){return[this.attrs.x,this.attrs.y,this.attrs.width,this.attrs.height]},draw:function(a){this._visible&&this.context.renderer.drawRect([this.attrs.x,this.attrs.y,this.attrs.width,this.attrs.height],a,this.styles,this.matrix,this)},isPointIn:function(a,b){return a>this.attrs.x&&b>this.attrs.y&&a<this.attrs.x+this.attrs.width&&b<this.attrs.y+this.attrs.height}}),t.args=["x","y","width","height","fill","stroke"],D.rect=function(){return new t(arguments)},u=new h(r,{initialize:function(a,b){this.super("initialize",arguments),l(a[0])&&(a=this.processObject(a[0],u.args)),this.attrs.cx=a[0],this.attrs.cy=a[1],this.attrs.radius=a[2],a[3]&&(this.styles.fillStyle=a[3]),a[4]&&r.processStroke(a[4],this.styles)},attrHooks:i(Object.assign({},r.prototype.attrHooks),{cx:{set:function(a){return this.update(),a}},cy:{set:function(a){return this.update(),a}},radius:{set:function(a){return this.update(),Math.abs(a)}}}),shapeBounds:function(){return[this.attrs.cx-this.attrs.radius,this.attrs.cy-this.attrs.radius,2*this.attrs.radius,2*this.attrs.radius]},draw:function(a){this._visible&&this.context.renderer.drawCircle([this.attrs.cx,this.attrs.cy,this.attrs.radius],a,this.styles,this.matrix,this)},isPointIn:function(a,b){return Math.pow(a-this.attrs.cx,2)+Math.pow(b-this.attrs.cy,2)<=Math.pow(this.attrs.radius,2)}}),u.args=["cx","cy","radius","fill","stroke"],D.circle=function(){return new u(arguments)},v=new h({initialize:function(a,b,c){this.method=a,this.path=c,this.attrs=b},update:function(){return this.path.update(),this},process:function(a){a[this.method].apply(a,this.attrs)},attr:function(a,c){return l(a)?(Object.keys(a).forEach(function(b){this.attr(b,a[b])}.bind(this)),this):(a=v.types[this.name].attrs.indexOf(a),c===b?this.attrs[a]:(this.attrs[a]=c,this.update()))},bounds:function(){return v.types[this.method].bounds(this.attrs)}}),v.types={moveTo:{attrs:["x","y"],bounds:function(a){}},lineTo:{attrs:["x","y"]}},v.fromArray=function(a,b){if(a===!0)return O;if(a[0]in v.types)return new v(a[0],a.slice(1),b);switch(a.length){case 2:return new v("lineTo",a,b);case 4:return new v("quadraticCurveTo",a,b);case 6:return new v("bezierCurveTo",a,b)}},D.curves=v.types;var O=new v("closePath",[]);w=new h(r,{initialize:function(a,b){this.super("initialize",arguments),l(a[0])&&(a=this.processObject(a[0],w.args)),this.attrs.d=w.parse(a[0],this),a[1]&&(this.styles.fillStyle=a[1]),a[2]&&r.processStroke(a[2],this.styles)},attrHooks:i(Object.assign({},r.prototype.attrHooks),{d:{set:function(a){return this.update(),a}}}),part:function(a,c){return c===b?this.attrs.d[a]:(c=w.parse(c,this,0!==a),this.attrs.d.splice.apply(this.attrs.d,[a,1].concat(c)),this.update())},before:function(a,b,c){return 0===a&&turnToLine!==!1&&(this.attrs.d[0].name="lineTo"),b=w.parse(b,this,0!==a),this.attrs.d.splice.apply(this.attrs.d,[a,0].concat(b)),this.update()},after:function(a,b){return this.before(a+1,b)},remove:function(a){return a===b?this.super("remove"):(this.attrs.d[a].path=null,this.attrs.d.splice(a,1),this.update())},push:function(a){return this.attrs.d=this.attrs.d.concat(w.parse(a,this,0!==this.attrs.d.length)),this.update()},forEach:function(){return this.attrs.d.forEach.apply(this.attrs.d,arguments),this},map:function(){return this.attrs.d.map.apply(this.attrs.d,arguments)},reduce:function(){return this.attrs.d.reduce.apply(this.attrs.d,arguments)},moveTo:function(a,b){return this.push(["moveTo",a,b])},lineTo:function(a,b){return this.push(["lineTo",a,b])},quadraticCurveTo:function(a,b,c,d){return this.push(["quadraticCurveTo",a,b,c,d])},bezierCurveTo:function(a,b,c,d,e,f){return this.push(["bezierCurveTo",a,b,c,d,e,f])},arcTo:function(a,b,c,d,e,f){return this.push(["arcTo",a,b,c,d,e,!!f])},arc:function(a,b,c,d,e,f){return this.push(["arc",a,b,c,d,e,!!f])},closePath:function(){return this.push(O)},shapeBounds:function(){for(var a,b=1/0,c=1/0,d=-(1/0),e=-(1/0),f=0;f<this.attrs.d.length;f++)a=this.attrs.d[f].bounds(),b=Math.min(b,a.x1,a.x2),d=Math.max(d,a.x1,a.x2),c=Math.min(c,a.y1,a.y2),e=Math.max(e,a.y1,a.y2);return new g(b,c,d-b,e-c)},draw:function(a){this._visible&&this.context.renderer.drawPath(this.attrs.d,a,this.styles,this.matrix,this)}}),w.args=["d","fill","stroke"],w.parse=function(a,b,c){if(!a)return[];if(a+""===a)return w.parseSVG(a,b,c);var d=[];if(Array.isArray(a))for(var e=0;e<a.length;e++)+a[1]===a[1]&&(a=[a]),0!==e||c?d.push(v.fromArray(a[e],b)):d.push(new v("moveTo",isNaN(a[e][0])?a[e].slice(1):a[e],b));return d},w.parseSVG=function(a,b,c){return[]},D.path=function(){var a=new w(arguments);return a.init(),a},x=new h(r,{initialize:function(a,b){this.super("initialize",arguments),l(a[0])&&(a=this.processObject(a[0],x.args)),this.attrs.image=x.parse(a[0]),this.attrs.x=a[1],this.attrs.y=a[2],a[3]&&(this.attrs.width=a[3]),a[4]&&(this.attrs.height=a[4]),a[5]&&(this.attrs.crop=a[5]),this.attrs.image.addEventListener("load",function(a){this.update(),this.attrs.image.blob&&K.revokeObjectURL(blob),this.fire("load",a)}.bind(this)),this.attrs.image.addEventListener("error",function(a){this.fire("error",a)})},draw:function(a){if(this._visible){var b=[this.attrs.image,this.attrs.x,this.attrs.y];this.context.renderer.drawImage(b,a,this.styles,this.matrix,this)}}}),x.args=["image","x","y","width","height","crop"],x.parse=function(a){if(a+""===a){if("#"===a[0])return E.getElementById(a.substr(1));if("<svg"!==a[0]){var b=new Image;return b.src=a,b}var c=new Blob([a],{type:"image/svg+xml;charset=utf-8"});a=new Image,a.src=K.createObjectURL(c),a.blob=c}return a},D.image=function(){var a=new x(arguments);return a},y=new h(r,{initialize:function(a,b){this.super("initialize",arguments),l(a[0])&&(a=this.processObject(a[0],y.args)),this.attrs.data=a[0],this.attrs.x=a[1],this.attrs.y=a[2]},draw:function(a){if(this._visible){var b=[this.attrs.data,this.attrs.x,this.attrs.y];this.context.renderer.drawData(b,a,this.styles,this.matrix,this)}}}),y.args=["data","x","y"],D.raster=function(){var a=new y(arguments);return a},A=new h({initialize:function(a,b,c,d,e){this.context=e,a+""!==a&&(d=c,c=b,b=a,a="linear"),this.type=a||"linear",this.attrs={from:c,to:d,colors:A.parseColors(b)}},useCache:!0,attr:r.prototype.attr,attrHooks:{colors:{set:function(a){return this.update(),A.parseColors(a)}}},color:function(a,c){if(c!==b)return this.attrs.colors[a]=c,this.update();if(this.attrs.colors[a])return D.color(this.attrs.colors[a]);var d=this.attrs.colors,e=Object.keys(d).sort();if(a<e[0])return D.color(d[e[0]]);if(a>e[e.length-1])return D.color(d[e[e.length-1]]);for(var f=0;f<e.length;f++)if(+e[f]>a){var g=D.color(d[e[f-1]]),h=D.color(d[e[f]]);return a=(a-+e[f-1])/(+e[f]-+e[f-1]),[g[0]+(h[0]-g[0])*a+.5|0,g[1]+(h[1]-g[1])*a+.5|0,g[2]+(h[2]-g[2])*a+.5|0,+(g[3]+(h[3]-g[3])*a).toFixed(2)]}},update:function(){return this.context.update(),this},toCanvasStyle:function(a,b){return A.types[this.type].toCanvasStyle.call(this,a,b)}}),A.parseColors=function(a){if(!Array.isArray(a))return a;var b={},c=1/(a.length-1);return a.forEach(function(a,d){b[c*d]=a}),b},A.types={linear:{attrHooks:{from:{set:function(a){return this.update(),a}},to:{set:function(a){return this.update(),a}}},toCanvasStyle:function(a,b){var c=b.corner(this.attrs.from),d=b.corner(this.attrs.to),e=this.attrs.colors,f=a.createLinearGradient(c[0],c[1],d[0],d[1]);return Object.keys(e).forEach(function(a){f.addColorStop(a,e[a])}),f}},radial:{initialize:function(){this.attrs.from&&Array.isArray(this.attrs.from)?(this.attrs.startRadius=this.attrs.from[2]||0,this.attrs.from=this.attrs.from.slice(0,2)):(this.attrs.from||(this.attrs.from="center"),
this.attrs.startRadius=0),this.attrs.to&&Array.isArray(this.attrs.to)?(this.attrs.radius=this.attrs.to[2]||"auto",this.attrs.to=this.attrs.to.slice(0,2)):(this.attrs.to||(this.attrs.to=this.attrs.from),this.attrs.radius="auto")},attrHooks:{from:{set:function(a){return Array.isArray(a)&&a.length>2&&(this.attrs.startRadius=a[2],a=a.slice(0,2)),this.update(),a}},to:{set:function(a){return Array.isArray(a)&&a.length>2&&(this.attrs.radius=a[2],a=a.slice(0,2)),this.update(),a}},radius:{set:function(a){return this.update(),a}},startRadius:{set:function(a){return this.update(),a}}},toCanvasStyle:function(a,b){var c=b.corner(this.attrs.from),d=b.corner(this.attrs.to),e="auto"===this.attrs.radius?b.bounds().height:this.attrs.radius,f=this.attrs.colors,g=a.createRadialGradient(c[0],c[1],this.attrs.startRadius,d[0],d[1],e);return Object.keys(f).forEach(function(a){g.addColorStop(a,f[a])}),g}}},B=new h({initialize:function(a,b,c){this.image=x.parse(a),this.context=c,this.image.addEventListener("load",function(a){this.update()}.bind(this))},update:function(){return this.context.update(),this},toCanvasStyle:function(a){return this.image.complete?a.createPattern(this.image,"repeat"):"transparent"}}),B.parseRepeat=function(a){return a===!!a?a?"repeat":"no-repeat":a===a+""?"repeat-"+a:"repeat"},D.easing={linear:function(a){return a},root:function(a){return Math.sqrt(a)},pow:function(a,b){return Math.pow(a,b||6)},expo:function(a,b){return Math.pow(b||2,8*a-8)},circ:function(a){return 1-Math.sin(Math.acos(a))},sine:function(a){return 1-Math.cos(a*Math.PI/2)},back:function(a,b){return Math.pow(a,2)*((b||1.618)*(a-1)+a)},bounce:function(a){for(var b=0,c=1;1;b+=c,c/=2)if(a>=(7-4*b)/11)return c*c-Math.pow((11-6*b-11*a)/4,2)},elastic:function(a,b){return Math.pow(2,10*--a)*Math.cos(20*a*Math.PI*(b||1)/3)}},["quad","cubic","quart","quint"].forEach(function(a,b){D.easing[a]=function(a){return Math.pow(a,b+2)}});for(var P in D.easing)Object.prototype.hasOwnProperty.call(D.easing,P)&&f(D.easing[P]);D.reNumberLike=/^(\d+|(\d+)?\.\d+)(em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|px|pt|pc)?$/,D.Class=h,D.Bounds=g,D.extend=i,D.argument=j,D.wrap=k,D.isObject=l,D.isNumberLike=n,D.isPatternLike=o,D.dashes={shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},D.fileTypes={jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",webp:"image/webp"},D.corners={left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],center:[.5,.5],"left top":[0,0],"top left":[0,0],"left bottom":[0,1],"bottom left":[0,1],"right top":[1,0],"top right":[1,0],"right bottom":[1,1],"bottom right":[1,1],lt:[0,0],tl:[0,0],lb:[0,1],bl:[0,1],rt:[1,0],tr:[1,0],rb:[1,1],br:[1,1]},D.colors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",chucknorris:"c00000",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},D.coordsOfElement=function(b){var c=b.getBoundingClientRect(),d=a.getComputedStyle(b);return{x:c.left+parseInt(d.borderLeftWidth)+parseInt(d.paddingLeft),y:c.top+parseInt(d.borderTopWidth)+parseInt(d.paddingTop)}},D.clone=function(a){var b=new a.constructor;for(var c in a)I(a,c)&&("object"!=typeof a[c]||a[c]instanceof q||a[c]instanceof Image?b[c]=a[c]:b[c]=D.clone(a[c]));return b},D.transform=function(a,b){return[a[0]*b[0]+a[2]*b[1],a[1]*b[0]+a[3]*b[1],a[0]*b[2]+a[2]*b[3],a[1]*b[2]+a[3]*b[3],a[0]*b[4]+a[2]*b[5]+a[4],a[1]*b[4]+a[3]*b[5]+a[5]]},D.color=function(a){if(a!==b){if(Array.isArray(a))return a.slice(0,4);if(a+""!==a)throw"Not a color: "+a.toString();return 0===a.indexOf("rgb")?(a=a.substring(a.indexOf("(")+1,a.length-1).replace(/\s/g,"").split(",").map(function(a){return a.indexOf("%")>0?Math.round(2.55*parseInt(a)):parseInt(a)}),3===a.length&&a.push(1),a):"#"===a[0]?(a=a.substring(1),3===a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),[parseInt(a.substring(0,2),16),parseInt(a.substring(2,4),16),parseInt(a.substring(4,6),16),1]):a in D.colors?D.color("#"+D.colors[a]):"rand"===a?[Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random()),1]:[0,0,0,0]}},D.angleUnit="grad",D.unit="px";var Q="pt em in cm mm pc ex ch rem v wvh vmin vmax".split(" "),R={px:1,ch:8,cm:37.78125,em:16,ex:7.15625,in:96,mm:3.765625,pc:16,pt:1.328125,rem:16,v:16,vmax:13.65625,vmin:4.78125,wvh:16};D.snapToPixels=0,D.distance=p,D.Context=q,D.Drawable=r,D.Shape=s,D.Rect=t,D.Circle=u,D.Curve=v,D.Path=w,D.Image=x,D.Text=z,D.Gradient=A,D.Pattern=B,D.version=Math.PI/3.490658503988659,D.query=function(b,c,d,e){return new q(b+""===b?(d||a.document).querySelectorAll(b)[c||0]:b.canvas||b,e)},D.id=function(a,b){return new q(E.getElementById(a),b)},"object"==typeof module&&"object"==typeof module.exports?module.exports=D:"function"==typeof define&&define.amd?define([],function(){return D}):a.Graphics2D=D}("undefined"!=typeof window?window:this);